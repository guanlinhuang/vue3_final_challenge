"use strict";(self["webpackChunkvue3_final_challenge"]=self["webpackChunkvue3_final_challenge"]||[]).push([[34],{5749:function(t,e,l){l.d(e,{A:function(){return m}});var a=l(6768),s=l(4232),o=l(5130);const n={"aria-label":"Page navigation example"},i={class:"pagination justify-content-center",style:{width:"100%"}},c=["onClick"];function r(t,e,l,r,u,d){return(0,a.uX)(),(0,a.CE)("nav",n,[(0,a.Lk)("ul",i,[(0,a.Lk)("li",{class:(0,s.C4)(["page-item hidePrevButton",{disabled:!l.pages.has_pre}])},[(0,a.Lk)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,o.D$)((t=>d.updatePage(l.pages.current_page-1)),["prevent"]))},e[2]||(e[2]=[(0,a.Lk)("span",{"aria-hidden":"true"},"«",-1)]))],2),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.pages.total_pages,(t=>((0,a.uX)(),(0,a.CE)("li",{class:(0,s.C4)(["page-item page_bottom",{active:t===l.pages.current_page}]),key:t},[(0,a.Lk)("a",{class:"page-link",href:"#",onClick:(0,o.D$)((e=>d.updatePage(t)),["prevent"])},(0,s.v_)(t),9,c)],2)))),128)),(0,a.Lk)("li",{class:(0,s.C4)(["page-item hideNextButton",{disabled:!l.pages.has_next}])},[(0,a.Lk)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,o.D$)((t=>d.updatePage(l.pages.current_page+1)),["prevent"]))},e[3]||(e[3]=[(0,a.Lk)("span",{"aria-hidden":"true"},"»",-1)]))],2)])])}var u={props:["pages"],methods:{updatePage(t){this.$emit("emit-pages",t)}}},d=l(1241);const p=(0,d.A)(u,[["render",r]]);var m=p},8034:function(t,e,l){l.r(e),l.d(e,{default:function(){return Et}});var a=l(6768),s=l(4232),o=l(5130);const n={class:"container py-5 mx-auto"},i={class:"category_btn my-4 my-lg-5 row row-cols-2 row-cols-lg-6 gx-1 gx-lg-3 mx-1 mx-lg-0"},c={class:"col"},r={class:"col"},u={class:"col"},d={class:"col"},p={class:"col"},m={class:"col"},k={class:"text-end mx-2 mx-lg-3 px-lg-4"},g={class:"row"},h={class:"col-lg-9 mx-auto d-none d-lg-block"},L={class:"table mt-4 align-middle"},b={class:"text-center"},v=["onClick"],f={style:{width:"70px"}},y={style:{width:"70px",height:"100px"}},x=["src","alt"],P={class:"align-top text-start"},C={class:"text-right"},_={class:"text-right"},w={key:0,class:"text-success"},$={key:1,class:"text-danger"},M={class:"btn-group"},U=["onClick"],F={class:"col d-lg-none"},N={class:"col-3 p-0 pe-1"},D={style:{width:"100%",height:"140px"}},E=["src","alt"],X={class:"col-9 p-0 ps-1"},A={class:"d-flex align-items-center mb-2"},H={class:"border border-dark p-1 mb-0"},I={class:"mb-0 mx-2"},J=["onClick"],V={class:"mb-0"},j={class:"ms-4"},W={class:"d-flex mt-4"},K={key:0,class:"text-success"},S={key:1,class:"text-danger"},O=["onClick"];function B(t,e,l,B,Q,q){const z=(0,a.g2)("Loading"),G=(0,a.g2)("Pagination"),R=(0,a.g2)("ProductModal"),T=(0,a.g2)("DelModal");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(z,{active:Q.isLoading},{default:(0,a.k6)((()=>e[7]||(e[7]=[(0,a.Lk)("section",null,[(0,a.Lk)("span",{class:"loader-18"})],-1)]))),_:1},8,["active"]),(0,a.Lk)("div",n,[e[20]||(e[20]=(0,a.Lk)("h3",{class:"text-center"},"產品列表",-1)),(0,a.Lk)("div",i,[(0,a.Lk)("div",c,[(0,a.Lk)("button",{type:"button",class:(0,s.C4)(["btnHover2 w-100 mb-1 mb-lg-0",{active:""===Q.categoryName}]),value:"全部商品","data-text":"全部商品",onClick:e[0]||(e[0]=(0,o.D$)((t=>(Q.categoryName="",q.updateCategory(""),q.changeClass(1))),["prevent"]))},e[8]||(e[8]=[(0,a.eW)(" 全部商品"),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1)]),2)]),(0,a.Lk)("div",r,[(0,a.Lk)("button",{type:"button",class:(0,s.C4)(["btnHover2 w-100 mb-1 mb-lg-0",{active:2===Q.isActive}]),"data-text":"咖啡",onClick:e[1]||(e[1]=(0,o.D$)((t=>(Q.categoryName="咖啡",q.updateCategory("咖啡"),q.changeClass(2))),["prevent"])),value:"咖啡"},e[9]||(e[9]=[(0,a.eW)(" 咖啡"),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1)]),2)]),(0,a.Lk)("div",u,[(0,a.Lk)("button",{type:"button",class:(0,s.C4)(["btnHover2 w-100 mb-1 mb-lg-0",{active:3===Q.isActive}]),"data-text":"果汁",onClick:e[2]||(e[2]=(0,o.D$)((t=>(Q.categoryName="果汁",q.updateCategory("果汁"),q.changeClass(3))),["prevent"])),value:"果汁"},e[10]||(e[10]=[(0,a.eW)(" 果汁"),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1)]),2)]),(0,a.Lk)("div",d,[(0,a.Lk)("button",{type:"button",class:(0,s.C4)(["btnHover2 w-100 mb-1 mb-lg-0",{active:4===Q.isActive}]),"data-text":"冰沙",onClick:e[3]||(e[3]=(0,o.D$)((t=>(Q.categoryName="冰沙",q.updateCategory("冰沙"),q.changeClass(4))),["prevent"])),value:"冰沙"},e[11]||(e[11]=[(0,a.eW)(" 冰沙"),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1)]),2)]),(0,a.Lk)("div",p,[(0,a.Lk)("button",{type:"button",class:(0,s.C4)(["btnHover2 w-100 mb-1 mb-lg-0",{active:5===Q.isActive}]),"data-text":"甜點",onClick:e[4]||(e[4]=(0,o.D$)((t=>(Q.categoryName="甜點",q.updateCategory("甜點"),q.changeClass(5))),["prevent"])),value:"甜點"},e[12]||(e[12]=[(0,a.eW)(" 甜點"),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1)]),2)]),(0,a.Lk)("div",m,[(0,a.Lk)("button",{type:"button",class:(0,s.C4)(["btnHover2 w-100 mb-1 mb-lg-0",{active:6===Q.isActive}]),"data-text":"組合餐",onClick:e[5]||(e[5]=(0,o.D$)((t=>(Q.categoryName="組合餐",q.updateCategory("組合餐"),q.changeClass(6))),["prevent"])),value:"組合餐"},e[13]||(e[13]=[(0,a.eW)(" 組合餐"),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1),(0,a.Lk)("span",null,null,-1)]),2)])]),(0,a.Lk)("div",k,[(0,a.Lk)("button",{type:"button",class:"btnHover btnHover5",onClick:e[6]||(e[6]=t=>q.openModal(!0))},e[14]||(e[14]=[(0,a.Lk)("div",null,[(0,a.Lk)("span",null,"新增產品"),(0,a.Lk)("span",null,"新增產品")],-1)]))]),(0,a.Lk)("div",g,[(0,a.Lk)("div",h,[(0,a.Lk)("table",L,[e[17]||(e[17]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"text-center"},[(0,a.Lk)("th"),(0,a.Lk)("th",null,"分類"),(0,a.Lk)("th"),(0,a.Lk)("th",{class:"text-start"},"產品名稱"),(0,a.Lk)("th",null,"原價"),(0,a.Lk)("th",null,"售價"),(0,a.Lk)("th",null,"是否啟用"),(0,a.Lk)("th")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(q.productsFilter,(l=>((0,a.uX)(),(0,a.CE)("tr",{class:"text-center",key:l.id},[(0,a.Lk)("td",b,[(0,a.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:t=>q.openDelProductModal(l)},e[15]||(e[15]=[(0,a.Lk)("i",{class:"bi bi-x-lg"},null,-1)]),8,v)]),(0,a.Lk)("td",null,(0,s.v_)(l.category),1),(0,a.Lk)("td",f,[(0,a.Lk)("div",y,[(0,a.Lk)("img",{src:l.imageUrl,alt:l.title,class:"w-100 h-100 object-fit-cover"},null,8,x)])]),(0,a.Lk)("td",P,(0,s.v_)(l.title),1),(0,a.Lk)("td",C," $"+(0,s.v_)(t.$filters.currency(l.origin_price)),1),(0,a.Lk)("td",_,"$"+(0,s.v_)(t.$filters.currency(l.price)),1),(0,a.Lk)("td",null,[l.is_enabled?((0,a.uX)(),(0,a.CE)("span",w,"啟用")):((0,a.uX)(),(0,a.CE)("span",$,"未啟用"))]),(0,a.Lk)("td",null,[(0,a.Lk)("div",M,[(0,a.Lk)("button",{type:"button",class:"btnHover me-1",onClick:t=>q.openModal(!1,l)},e[16]||(e[16]=[(0,a.Lk)("div",null,[(0,a.Lk)("span",null,"編輯"),(0,a.Lk)("span",null,"編輯")],-1)]),8,U)])])])))),128))])])]),(0,a.Lk)("div",F,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(q.productsFilter,(l=>((0,a.uX)(),(0,a.CE)("div",{class:"row mx-2 my-3 p-2 border rounded-3 d-flex",key:l.id},[(0,a.Lk)("div",N,[(0,a.Lk)("div",D,[(0,a.Lk)("img",{src:l.imageUrl,alt:l.title,class:"w-100 h-100 object-fit-cover rounded-start"},null,8,E)])]),(0,a.Lk)("div",X,[(0,a.Lk)("div",A,[(0,a.Lk)("p",H,(0,s.v_)(l.category),1),(0,a.Lk)("p",I,(0,s.v_)(l.title),1),(0,a.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm ms-auto",onClick:t=>q.openDelProductModal(l)},e[18]||(e[18]=[(0,a.Lk)("i",{class:"bi bi-x-lg"},null,-1)]),8,J)]),(0,a.Lk)("p",V,[(0,a.eW)(" 原價 $"+(0,s.v_)(t.$filters.currency(l.origin_price)),1),(0,a.Lk)("span",j,"售價 $"+(0,s.v_)(t.$filters.currency(l.price)),1)]),(0,a.Lk)("div",W,[(0,a.Lk)("p",null,[l.is_enabled?((0,a.uX)(),(0,a.CE)("span",K,"啟用")):((0,a.uX)(),(0,a.CE)("span",S,"未啟用"))]),(0,a.Lk)("button",{type:"button",class:"btnHover p-0 ms-auto",style:{"min-width":"100px"},onClick:t=>q.openModal(!1,l)},e[19]||(e[19]=[(0,a.Lk)("div",null,[(0,a.Lk)("span",null,"編輯"),(0,a.Lk)("span",null,"編輯")],-1)]),8,O)])])])))),128))])]),(0,a.bF)(G,{pages:Q.pagination,onEmitPages:q.getProducts},null,8,["pages","onEmitPages"]),(0,a.bF)(R,{ref:"productModal",product:Q.tempProduct,onUpdateProduct:q.updateProduct},null,8,["product","onUpdateProduct"]),(0,a.bF)(T,{item:Q.tempProduct,ref:"delModal",onDelItem:q.delProduct},null,8,["item","onDelItem"])])],64)}l(4114),l(8111),l(2489);const Q={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},q={class:"modal-dialog modal-lg",role:"document"},z={class:"modal-content border-0"},G={class:"modal-body"},R={class:"row"},T={class:"col-sm-6"},Y={class:"imageUrl"},Z={class:"mb-3"},tt={class:"mb-3"},et={key:0,class:"mb-5",style:{width:"100%",height:"500px"}},lt=["src","alt"],at={class:"imagesUrl"},st={class:"mb-3"},ot={class:"col-2 d-flex align-items-center"},nt=["onClick"],it={class:"col-10 ps-0"},ct=["src","alt"],rt={class:"col-sm-6 mt-4 mt-lg-0"},ut={class:"mb-3"},dt={class:"row gx-2"},pt={class:"mb-3 col-md-6"},mt={class:"mb-3 col-md-6"},kt={class:"row gx-2"},gt={class:"mb-3 col-md-6"},ht={class:"mb-3 col-md-6"},Lt={class:"mb-3"},bt={class:"mb-3"},vt={class:"mb-3"},ft={class:"form-check"},yt={class:"modal-footer row"},xt={class:"col col-lg-3 ps-0"};function Pt(t,e,l,s,n,i){return(0,a.uX)(),(0,a.CE)("div",Q,[(0,a.Lk)("div",q,[(0,a.Lk)("div",z,[e[28]||(e[28]=(0,a.Lk)("div",{class:"modal-header modal_bg text-white"},[(0,a.Lk)("h5",{class:"modal-title",id:"exampleModalLabel"},[(0,a.Lk)("span",null,"新增產品")])],-1)),(0,a.Lk)("div",G,[(0,a.Lk)("div",R,[(0,a.Lk)("div",T,[(0,a.Lk)("div",Y,[(0,a.Lk)("div",Z,[e[12]||(e[12]=(0,a.Lk)("label",{for:"image",class:"form-label"},"輸入圖片網址",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control",id:"image","onUpdate:modelValue":e[0]||(e[0]=t=>n.tempProduct.imageUrl=t),placeholder:"請輸入圖片連結"},null,512),[[o.Jo,n.tempProduct.imageUrl]])]),(0,a.Lk)("div",tt,[e[13]||(e[13]=(0,a.Lk)("label",{for:"customFile",class:"form-label"},"或 上傳主要圖片 ",-1)),(0,a.Lk)("input",{type:"file",id:"customFile",class:"form-control",ref:"fileInput",onChange:e[1]||(e[1]=(...t)=>i.uploadFile&&i.uploadFile(...t))},null,544)]),n.tempProduct.imageUrl?((0,a.uX)(),(0,a.CE)("div",et,[(0,a.Lk)("img",{class:"w-100 h-100 object-fit-cover",src:n.tempProduct.imageUrl,alt:n.tempProduct.title},null,8,lt)])):(0,a.Q3)("",!0)]),(0,a.Lk)("div",at,[(0,a.Lk)("div",st,[e[14]||(e[14]=(0,a.Lk)("label",{for:"customFile_1",class:"form-label"},[(0,a.eW)("上傳其他圖片"),(0,a.Lk)("i",{class:"fas fa-spinner fa-spin"})],-1)),(0,a.Lk)("input",{type:"file",id:"customFile_1",class:"form-control",multiple:"",onChange:e[2]||(e[2]=(...t)=>i.uploadFiles&&i.uploadFiles(...t)),ref:"filesInput_1"},null,544)]),((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.tempProduct.imagesUrl,((t,l)=>((0,a.uX)(),(0,a.CE)("div",{class:"row my-1",key:l},[(0,a.Lk)("div",ot,[(0,a.Lk)("button",{type:"button",class:"btn btn-outline-danger",onClick:t=>n.tempProduct.imagesUrl.splice(l,1)},e[15]||(e[15]=[(0,a.Lk)("i",{class:"bi bi-x-lg"},null,-1)]),8,nt)]),(0,a.Lk)("div",it,[(0,a.Lk)("img",{class:"img-fluid",src:t,alt:t},null,8,ct)])])))),128))])]),(0,a.Lk)("div",rt,[(0,a.Lk)("div",ut,[e[16]||(e[16]=(0,a.Lk)("label",{for:"title",class:"form-label"},"標題",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control",id:"title","onUpdate:modelValue":e[3]||(e[3]=t=>n.tempProduct.title=t),placeholder:"請輸入標題"},null,512),[[o.Jo,n.tempProduct.title]])]),(0,a.Lk)("div",dt,[(0,a.Lk)("div",pt,[e[18]||(e[18]=(0,a.Lk)("p",{class:"mb-2"},"分類",-1)),(0,a.bo)((0,a.Lk)("select",{class:"form-select select_border","aria-label":"Default select example","onUpdate:modelValue":e[4]||(e[4]=t=>n.tempProduct.category=t)},e[17]||(e[17]=[(0,a.Fv)('<option value="咖啡">咖啡</option><option value="果汁">果汁</option><option value="冰沙">冰沙</option><option value="甜點">甜點</option><option value="組合餐">組合餐</option>',5)]),512),[[o.u1,n.tempProduct.category]])]),(0,a.Lk)("div",mt,[e[19]||(e[19]=(0,a.Lk)("label",{for:"price",class:"form-label"},"單位",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",class:"form-control",id:"unit","onUpdate:modelValue":e[5]||(e[5]=t=>n.tempProduct.unit=t),placeholder:"請輸入單位"},null,512),[[o.Jo,n.tempProduct.unit]])])]),(0,a.Lk)("div",kt,[(0,a.Lk)("div",gt,[e[20]||(e[20]=(0,a.Lk)("label",{for:"origin_price",class:"form-label"},"原價",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",class:"form-control",id:"origin_price","onUpdate:modelValue":e[6]||(e[6]=t=>n.tempProduct.origin_price=t),placeholder:"請輸入原價"},null,512),[[o.Jo,n.tempProduct.origin_price,void 0,{number:!0}]])]),(0,a.Lk)("div",ht,[e[21]||(e[21]=(0,a.Lk)("label",{for:"price",class:"form-label"},"售價",-1)),(0,a.bo)((0,a.Lk)("input",{type:"number",class:"form-control",id:"price","onUpdate:modelValue":e[7]||(e[7]=t=>n.tempProduct.price=t),placeholder:"請輸入售價"},null,512),[[o.Jo,n.tempProduct.price,void 0,{number:!0}]])])]),e[25]||(e[25]=(0,a.Lk)("hr",null,null,-1)),(0,a.Lk)("div",Lt,[e[22]||(e[22]=(0,a.Lk)("label",{for:"description",class:"form-label"},"產品描述",-1)),(0,a.bo)((0,a.Lk)("textarea",{type:"text",class:"form-control",id:"description","onUpdate:modelValue":e[8]||(e[8]=t=>n.tempProduct.description=t),rows:"6",placeholder:"請輸入產品描述"},null,512),[[o.Jo,n.tempProduct.description]])]),(0,a.Lk)("div",bt,[e[23]||(e[23]=(0,a.Lk)("label",{for:"content",class:"form-label"},"說明內容",-1)),(0,a.bo)((0,a.Lk)("textarea",{type:"text",class:"form-control",id:"content","onUpdate:modelValue":e[9]||(e[9]=t=>n.tempProduct.content=t),rows:"6",placeholder:"請輸入產品說明內容"},null,512),[[o.Jo,n.tempProduct.content]])]),(0,a.Lk)("div",vt,[(0,a.Lk)("div",ft,[(0,a.bo)((0,a.Lk)("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=t=>n.tempProduct.is_enabled=t),"true-value":1,"false-value":0,id:"is_enabled"},null,512),[[o.lH,n.tempProduct.is_enabled]]),e[24]||(e[24]=(0,a.Lk)("label",{class:"form-check-label",for:"is_enabled"}," 是否啟用 ",-1))])])])])]),(0,a.Lk)("div",yt,[e[27]||(e[27]=(0,a.Lk)("div",{class:"col col-lg-3 pe-0"},[(0,a.Lk)("button",{type:"button",class:"btnHover me-lg-1 w-100","data-bs-dismiss":"modal"},[(0,a.Lk)("div",null,[(0,a.Lk)("span",null,"取消編輯"),(0,a.Lk)("span",null,"取消編輯")])])],-1)),(0,a.Lk)("div",xt,[(0,a.Lk)("button",{type:"button",class:"btnHover btnHover5 me-lg-1 w-100",onClick:e[11]||(e[11]=e=>t.$emit("update-product",n.tempProduct))},e[26]||(e[26]=[(0,a.Lk)("div",null,[(0,a.Lk)("span",null,"儲存"),(0,a.Lk)("span",null,"儲存")],-1)]))])])])])],512)}l(7588);var Ct=l(3308),_t={props:{product:{type:Object,default(){return{}}}},watch:{product(t){this.tempProduct={imagesUrl:[],...t}}},data(){return{modal:{},tempProduct:{}}},methods:{uploadFile(){const t=this.$refs.fileInput.files[0],e=new FormData;e.append("file-to-upl",t);const l="https://vue3-course-api.hexschool.io/api/guantony-api/admin/upload";this.$http.post(l,e).then((t=>{t.data.success&&(this.tempProduct.imageUrl=t.data.imageUrl)}))},uploadFiles(){const t=this.$refs.filesInput_1.files;Array.from(t).forEach((t=>{const e=new FormData;e.append("file-to-upload",t);const l="https://vue3-course-api.hexschool.io/api/guantony-api/admin/upload";this.$http.post(l,e).then((t=>{t.data.success&&this.tempProduct.imagesUrl.push(t.data.imageUrl)})).catch((()=>{alert("上傳失敗，請稍後再試")}))}))}},mixins:[Ct.A]},wt=l(1241);const $t=(0,wt.A)(_t,[["render",Pt]]);var Mt=$t,Ut=l(2821),Ft=l(5749),Nt={data(){return{products:[],pagination:{},tempProduct:{},isNew:!1,isLoading:!1,categoryName:"",isActive:1,currentPage:"",category:{}}},components:{ProductModal:Mt,DelModal:Ut.A,Pagination:Ft.A},inject:["emitter"],methods:{getProducts(t=1){this.isLoading=!0;const e="https://vue3-course-api.hexschool.io/api/guantony-api/admin/products/all";this.$http.get(e).then((e=>{if(!e.data.success)return void(this.isLoading=!1);this.products=Object.values(e.data.products),this.isLoading=!1;const{categoryName:l}=this.$route.params;l&&(this.categoryName=l),""!==this.categoryName?this.pagination={}:(this.setPagination(t),this.updateCategory()),this.isLoading=!1})).catch((t=>{this.$httpMessageState(t,"連線錯誤，請再試一次"),this.isLoading=!1}))},setPagination(t=1){const e=10;this.pagination={total_pages:Math.ceil(this.products.length/e),current_page:t,has_pre:1!==t,has_next:!1,category:null},this.pagination.current_page>=this.pagination.total_pages?(this.pagination.current_page=this.pagination.total_pages,this.pagination.has_next=!1):this.pagination.has_next=!0;const l=this.pagination.current_page*e-e,a=this.pagination.current_page*e;this.products=this.products.slice(l,a)},updateCategory(t){this.$router.push({name:"產品列表",params:{categoryName:t}})},changeClass(t){this.isActive=t},openModal(t,e){this.tempProduct=t?{}:JSON.parse(JSON.stringify(e)),this.isNew=t;const l=this.$refs.productModal;l.showModal()},updateProduct(t){this.tempProduct=t;let e="https://vue3-course-api.hexschool.io/api/guantony-api/admin/product",l="post";this.isNew||(e=`https://vue3-course-api.hexschool.io/api/guantony-api/admin/product/${t.id}`,l="put");const a=this.$refs.productModal;this.$http[l](e,{data:this.tempProduct}).then((t=>{a.hideModal(),t.data.success?(this.emitter.emit("push-message",{style:"success",title:"更新成功"}),this.getProducts()):this.emitter.emit("push-message",{style:"danger",title:"更新失敗",content:t.data.message.join("、")})})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))},openDelProductModal(t){this.tempProduct={...t};const e=this.$refs.delModal;e.showModal()},delProduct(){const t=`https://vue3-course-api.hexschool.io/api/guantony-api/admin/product/${this.tempProduct.id}`;this.$http.delete(t).then((t=>{const e=this.$refs.delModal;e.hideModal(),this.getProducts()})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))}},watch:{categoryName(t,e){""!==t&&""!==e||this.getProducts()}},computed:{productsFilter(){return this.products.filter((t=>t.category.match(this.categoryName)))}},created(){this.getProducts()}};const Dt=(0,wt.A)(Nt,[["render",B]]);var Et=Dt}}]);
//# sourceMappingURL=34.bcba8fc9.js.map