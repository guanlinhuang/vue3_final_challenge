"use strict";(self["webpackChunkvue3_final_challenge"]=self["webpackChunkvue3_final_challenge"]||[]).push([[903],{1151:function(t,e){e.A={saveFavorite(t){const e=JSON.stringify(t);localStorage.setItem("favoriteProduct",e)},getFavorite(){return JSON.parse(localStorage.getItem("favoriteProduct"))}}},3903:function(t,e,s){s.r(e),s.d(e,{default:function(){return H}});var i=s(6768),a=s(4232),o=s(5130);const r={class:"container py-lg-5 UserProductDetail"},c={class:"row d-flex justify-content-lg-center"},l={class:"col-lg-5 col-xl-4 me-5 mt-0 mt-sm-2"},d={"aria-label":"breadcrumb",class:"d-none d-lg-block"},u={class:"breadcrumb"},n={class:"breadcrumb-item"},p={class:"breadcrumb-item active text-dark","aria-current":"page"},h={class:"product_img mb-3 rounded-0"},g=["src","alt"],v=["onClick"],k={class:"swiper_img rounded-0",style:{height:"160px"}},m=["src","alt"],b={class:"col-lg-4 mt-3 mt-lg-5 px-4 px-lg-0"},L={class:"mb-3"},f={key:0},y={class:"product_origin_price text-decoration-line-through mb-1"},_={key:1},x={class:"mb-1 text-danger h5"},$={key:2},w={class:"h5 mb-1"},C={class:"d-flex"},P={class:"input-group my-3"},S=["disabled"],F={class:"my-auto"},Q={class:"row gx-lg-0 mx-0"},I={class:"my-5"},M={class:"position-relative text-center product h-100"},U=["onClick"],E={class:"swiper_img"},X=["src","alt"];function j(t,e,s,j,B,V){const q=(0,i.g2)("Loading"),N=(0,i.g2)("router-link"),T=(0,i.g2)("SwiperSlide"),A=(0,i.g2)("Swiper");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(q,{active:t.isLoading},{default:(0,i.k6)((()=>e[6]||(e[6]=[(0,i.Lk)("section",null,[(0,i.Lk)("span",{class:"loader-18"})],-1)]))),_:1},8,["active"]),(0,i.Lk)("div",r,[(0,i.Lk)("div",c,[(0,i.Lk)("div",l,[(0,i.Lk)("nav",d,[(0,i.Lk)("ol",u,[(0,i.Lk)("li",n,[(0,i.bF)(N,{to:"/productsall",class:"text-decoration-none text-dark productsall"},{default:(0,i.k6)((()=>e[7]||(e[7]=[(0,i.eW)("所有商品")]))),_:1})]),(0,i.Lk)("li",p,(0,a.v_)(B.product.title),1)])]),(0,i.Lk)("div",h,[(0,i.Lk)("img",{src:B.selectedImageUrl||B.product.imageUrl,alt:B.product.title,class:"object-fit-cover"},null,8,g)]),(0,i.Lk)("div",null,[(0,i.bF)(A,{class:"product-swiper mx-0 px-0",modules:B.modules,loop:!1,spaceBetween:3,slidesPerView:3,breakpoints:{992:{slidesPerView:3,spaceBetween:5}}},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(B.product.imagesUrl,((t,e)=>((0,i.uX)(),(0,i.Wv)(T,{key:e},{default:(0,i.k6)((()=>[(0,i.Lk)("a",{onClick:e=>V.changeImage(t)},[(0,i.Lk)("div",k,[(0,i.Lk)("img",{src:t,alt:B.product.title,class:"object-fit-cover"},null,8,m)])],8,v)])),_:2},1024)))),128))])),_:1},8,["modules"])])]),(0,i.Lk)("div",b,[(0,i.Lk)("h2",null,(0,a.v_)(B.product.title),1),(0,i.Lk)("div",L,(0,a.v_)(B.product.description),1),B.product.origin_price!==B.product.price?((0,i.uX)(),(0,i.CE)("div",f,[(0,i.Lk)("p",y," 原價 NT$ "+(0,a.v_)(B.product.origin_price),1)])):(0,i.Q3)("",!0),B.product.origin_price!==B.product.price?((0,i.uX)(),(0,i.CE)("div",_,[(0,i.Lk)("p",x,"特價 NT$ "+(0,a.v_)(B.product.price),1)])):(0,i.Q3)("",!0),B.product.origin_price===B.product.price?((0,i.uX)(),(0,i.CE)("div",$,[(0,i.Lk)("p",w,"原價 NT$ "+(0,a.v_)(B.product.price),1)])):(0,i.Q3)("",!0),e[12]||(e[12]=(0,i.Lk)("hr",{class:"w-auto"},null,-1)),(0,i.Lk)("div",null,(0,a.v_)(B.product.content),1),(0,i.Lk)("div",C,[(0,i.Lk)("div",P,[(0,i.Lk)("button",{class:"btn border-0",type:"button",onClick:e[0]||(e[0]=t=>V.changeQty(-1)),disabled:1===B.productsQty},e[8]||(e[8]=[(0,i.Lk)("i",{class:"bi bi-dash-lg"},null,-1)]),8,S),(0,i.bo)((0,i.Lk)("input",{type:"number",class:"form-control text-center","onUpdate:modelValue":e[1]||(e[1]=t=>B.productsQty=t),min:"1",readonly:""},null,512),[[o.Jo,B.productsQty]]),(0,i.Lk)("button",{class:"btn border-0",type:"button",onClick:e[2]||(e[2]=t=>V.changeQty(1))},e[9]||(e[9]=[(0,i.Lk)("i",{class:"bi bi-plus-lg"},null,-1)]))]),(0,i.Lk)("div",F,[(0,i.Lk)("button",{type:"button",onClick:e[3]||(e[3]=(0,o.D$)((t=>V.toggleFavorite(B.product)),["stop"])),class:"btn btn-favorite colorHeart fs-3"},[(0,i.Lk)("i",{class:(0,a.C4)(["bi",B.favorite.includes(B.product.id)?"bi-heart-fill":"bi-heart"]),style:{color:"#8fc0a9"}},null,2)])])]),(0,i.Lk)("div",Q,[(0,i.Lk)("button",{type:"button",class:"btnHover col me-1 me-lg-3",onClick:e[4]||(e[4]=t=>V.nowBuy(B.product.id))},e[10]||(e[10]=[(0,i.Lk)("div",null,[(0,i.Lk)("span",null,"立即購買"),(0,i.Lk)("span",null,"立即購買")],-1)])),(0,i.Lk)("button",{type:"button",class:"btnHover btnHover5 col ms-1 ms-lg-0 me-lg-1",onClick:e[5]||(e[5]=t=>V.addToCart(B.product.id))},e[11]||(e[11]=[(0,i.Lk)("div",null,[(0,i.Lk)("span",null,"加到購物車"),(0,i.Lk)("span",null,"加到購物車")],-1)]))])])]),(0,i.Lk)("div",I,[e[15]||(e[15]=(0,i.Lk)("h4",{class:"py-lg-3 fw-normal ms-3 ms-lg-0"},"看更多商品",-1)),(0,i.bF)(A,{class:"product-swiper",navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},modules:B.modules,loop:!1,spaceBetween:3,slidesPerView:3,breakpoints:{992:{slidesPerView:6,spaceBetween:30}}},{default:(0,i.k6)((()=>[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(B.products,(t=>((0,i.uX)(),(0,i.Wv)(T,{key:t.id},{default:(0,i.k6)((()=>[(0,i.Lk)("div",M,[(0,i.Lk)("a",{onClick:e=>V.getProductPage(t.id,t)},[(0,i.Lk)("div",E,[(0,i.Lk)("img",{src:`${t.imageUrl}`,alt:t.title,class:"object-fit-cover"},null,8,X)])],8,U)])])),_:2},1024)))),128)),e[13]||(e[13]=(0,i.Lk)("button",{class:"swiper-button-next btn btn-light"},null,-1)),e[14]||(e[14]=(0,i.Lk)("button",{class:"swiper-button-prev btn btn-light"},null,-1))])),_:1},8,["modules"])])])],64)}s(4114),s(8111),s(2489);var B=s(8421),V=s(317),q=s(1151),N={data(){return{product:{},id:"",carts:[],productsQty:1,products:[],favorite:q.A.getFavorite()||[],favoriteProduct:[],modules:[V.Ij,V.dK,V.Vx],selectedImageUrl:""}},inject:["emitter"],components:{Swiper:B.RC,SwiperSlide:B.qr},methods:{getProduct(){const t=`https://vue3-course-api.hexschool.io/api/guantony-api/product/${this.id}`;this.isLoading=!0,this.$http.get(t).then((t=>{this.isLoading=!1,t.data.success&&(this.product=t.data.product,this.product.imagesUrl.push(t.data.product.imageUrl))})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/guantony-api/cart";this.$http.get(t).then((t=>{this.carts=t.data.data.carts,this.emitter.emit("update-cart",this.carts)})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))},nowBuy(t,e=this.productsQty){const s="https://vue3-course-api.hexschool.io/api/guantony-api/cart",i={product_id:t,qty:e};this.isLoading=!0,this.$http.post(s,{data:i}).then((t=>{this.isLoading=!1,this.$httpMessageState(t,"加入購物車"),this.getCart(),this.$router.push("/cart")})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))},addToCart(t,e=this.productsQty){const s="https://vue3-course-api.hexschool.io/api/guantony-api/cart",i={product_id:t,qty:e};this.isLoading=!0,this.$http.post(s,{data:i}).then((t=>{this.isLoading=!1,this.$httpMessageState(t,"加入購物車"),this.getCart()})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))},updateCart(t){const e=`https://vue3-course-api.hexschool.io/api/guantony-api/cart/${t.id}`,s={product_id:t.product_id,qty:t.qty};this.$http.put(e,{data:s}).then((t=>{this.getCart()})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))},changeQty(t){this.productsQty+=t},getProductPage(t,e){this.selectedImageUrl=e.imageUrl,this.$router.push(`/products/${t}`),this.id=t,this.getProduct(),this.getProducts()},getProducts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/guantony-api/products/all";this.$http.get(t).then((t=>{t.data.success&&(this.products=t.data.products.filter((t=>t.id!==this.id)).sort((()=>Math.random()-.5)),this.isLoading=!1)})).catch((t=>{this.$httpMessageState(t,"連線錯誤，請再試一次"),this.isLoading=!1}))},getFavoriteProduct(){this.$http.get("https://vue3-course-api.hexschool.io/api/guantony-api/products/all").then((t=>{this.favoriteProduct=t.data.products.filter((t=>this.favorite.includes(t.id))),this.emitter.emit("update-favorite",this.favoriteProduct)})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))},toggleFavorite(t){this.favorite.includes(t.id)?(this.favorite.splice(this.favorite.indexOf(t.id),1),this.$httpMessageState({data:{success:!0}},"移除收藏")):(this.favorite.push(t.id),this.$httpMessageState({data:{success:!0}},"加入收藏")),q.A.saveFavorite(this.favorite),this.getFavoriteProduct()},changeImage(t){this.selectedImageUrl=t}},created(){this.id=this.$route.params.productId,this.getProduct(),this.getCart(),this.getProducts()}},T=s(1241);const A=(0,T.A)(N,[["render",j]]);var H=A}}]);
//# sourceMappingURL=903.d5e70abd.js.map