"use strict";(self["webpackChunkvue3_final_challenge"]=self["webpackChunkvue3_final_challenge"]||[]).push([[643],{5749:function(e,t,a){a.d(t,{A:function(){return u}});var s=a(6768),i=a(4232),c=a(5130);const r={"aria-label":"Page navigation example"},n={class:"pagination justify-content-center",style:{width:"100%"}},o=["onClick"];function l(e,t,a,l,p,g){return(0,s.uX)(),(0,s.CE)("nav",r,[(0,s.Lk)("ul",n,[(0,s.Lk)("li",{class:(0,i.C4)(["page-item hidePrevButton",{disabled:!a.pages.has_pre}])},[(0,s.Lk)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,c.D$)((e=>g.updatePage(a.pages.current_page-1)),["prevent"]))},t[2]||(t[2]=[(0,s.Lk)("span",{"aria-hidden":"true"},"«",-1)]))],2),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.pages.total_pages,(e=>((0,s.uX)(),(0,s.CE)("li",{class:(0,i.C4)(["page-item page_bottom",{active:e===a.pages.current_page}]),key:e},[(0,s.Lk)("a",{class:"page-link",href:"#",onClick:(0,c.D$)((t=>g.updatePage(e)),["prevent"])},(0,i.v_)(e),9,o)],2)))),128)),(0,s.Lk)("li",{class:(0,i.C4)(["page-item hideNextButton",{disabled:!a.pages.has_next}])},[(0,s.Lk)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,c.D$)((e=>g.updatePage(a.pages.current_page+1)),["prevent"]))},t[3]||(t[3]=[(0,s.Lk)("span",{"aria-hidden":"true"},"»",-1)]))],2)])])}var p={props:["pages"],methods:{updatePage(e){this.$emit("emit-pages",e)}}},g=a(1241);const d=(0,g.A)(p,[["render",l]]);var u=d},6643:function(e,t,a){a.r(t),a.d(t,{default:function(){return T}});var s=a(6768),i=a(4232),c=a(5130);const r={class:"container products_all mainContainer"},n={class:"row justify-content-center"},o={class:"d-lg-none w-100 menu fixed-top px-0"},l={class:"d-flex mb-0 menu-hover-fill flex flex-col items-start leading-none text-2xl uppercase space-y-4 text-center ps-0"},p={class:"d-none d-lg-block col-2 mt-5 pe-5 d-flex flex-row-reverse"},g={class:"menu-hover-fill flex flex-col items-start leading-none text-2xl uppercase space-y-4"},d={class:"mb-2"},u={class:"mb-2"},h={class:"mb-2"},v={class:"mb-2"},k={class:"mb-2"},C={class:"mb-2"},m={class:"col col-lg-9 mt-lg-5",style:{"margin-top":"45px"}},L={class:"row row-cols-2 row-cols-lg-4 gx-2 gx-lg-4 p-1 p-lg-0"},y={class:"position-relative text-center product h-100"},f=["onClick"],x={key:0,class:"onSale position-absolute text-white bg-danger py-1 px-3",style:{"z-index":"5"}},_={class:"product_img"},b=["src","alt"],$={class:"my-1 fw-normal"},A={class:"price text-center"},N={key:0},P={class:"mb-1 text-danger"},D={key:1},w={class:"mb-1"},E={key:2},X={class:"product_origin_price mb-1 text-decoration-line-through",style:{"font-size":"13px"}},F={class:"d-flex justify-content-center justify-content-lg-center"};function j(e,t,a,j,Q,K){const M=(0,s.g2)("Loading"),S=(0,s.g2)("Pagination");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(M,{active:Q.isLoading},{default:(0,s.k6)((()=>t[12]||(t[12]=[(0,s.Lk)("section",null,[(0,s.Lk)("span",{class:"loader-18"})],-1)]))),_:1},8,["active"]),(0,s.Lk)("div",r,[(0,s.Lk)("div",n,[(0,s.Lk)("div",o,[(0,s.Lk)("ul",l,[(0,s.Lk)("li",{class:(0,i.C4)(["border-bottom p-2",{active:1===Q.isActive}])},[(0,s.Lk)("a",{href:"#","data-text":"全部商品",onClick:t[0]||(t[0]=(0,c.D$)((e=>(Q.categoryName="",K.updateCategory(""),K.changeClass(1))),["prevent"])),class:(0,i.C4)({active:1===Q.isActive})}," 全部商品 ",2)],2),(0,s.Lk)("li",{class:(0,i.C4)(["border-bottom p-2",{active:2===Q.isActive}])},[(0,s.Lk)("a",{href:"#","data-text":"咖啡",onClick:t[1]||(t[1]=(0,c.D$)((e=>(Q.categoryName="咖啡",K.updateCategory("咖啡"),K.changeClass(2))),["prevent"])),class:(0,i.C4)({active:2===Q.isActive})}," 咖啡 ",2)],2),(0,s.Lk)("li",{class:(0,i.C4)(["border-bottom p-2",{active:3===Q.isActive}])},[(0,s.Lk)("a",{href:"#","data-text":"果汁",onClick:t[2]||(t[2]=(0,c.D$)((e=>(Q.categoryName="果汁",K.updateCategory("果汁"),K.changeClass(3))),["prevent"])),class:(0,i.C4)({active:3===Q.isActive})}," 果汁 ",2)],2),(0,s.Lk)("li",{class:(0,i.C4)(["border-bottom p-2",{active:4===Q.isActive}])},[(0,s.Lk)("a",{href:"#","data-text":"冰沙",onClick:t[3]||(t[3]=(0,c.D$)((e=>(Q.categoryName="冰沙",K.updateCategory("冰沙"),K.changeClass(4))),["prevent"])),class:(0,i.C4)({active:4===Q.isActive})}," 冰沙 ",2)],2),(0,s.Lk)("li",{class:(0,i.C4)(["border-bottom p-2",{active:5===Q.isActive}])},[(0,s.Lk)("a",{href:"#","data-text":"甜點",onClick:t[4]||(t[4]=(0,c.D$)((e=>(Q.categoryName="甜點",K.updateCategory("甜點"),K.changeClass(5))),["prevent"])),class:(0,i.C4)({active:5===Q.isActive})}," 甜點 ",2)],2),(0,s.Lk)("li",{class:(0,i.C4)(["border-bottom p-2",{active:6===Q.isActive}])},[(0,s.Lk)("a",{href:"#","data-text":"組合餐",onClick:t[5]||(t[5]=(0,c.D$)((e=>(Q.categoryName="組合餐",K.updateCategory("組合餐"),K.changeClass(6))),["prevent"])),class:(0,i.C4)({active:6===Q.isActive})},"組合餐 ",2)],2)])]),(0,s.Lk)("div",p,[(0,s.Lk)("ul",g,[(0,s.Lk)("li",d,[(0,s.Lk)("a",{href:"#","data-text":"全部商品",onClick:t[6]||(t[6]=(0,c.D$)((e=>(Q.categoryName="",K.updateCategory(""),K.changeClass(1))),["prevent"])),class:(0,i.C4)({active:1===Q.isActive})}," 全部商品 ",2)]),(0,s.Lk)("li",u,[(0,s.Lk)("a",{href:"#","data-text":"咖啡",onClick:t[7]||(t[7]=(0,c.D$)((e=>(Q.categoryName="咖啡",K.updateCategory("咖啡"),K.changeClass(2))),["prevent"])),class:(0,i.C4)({active:2===Q.isActive})}," 咖啡 ",2)]),(0,s.Lk)("li",h,[(0,s.Lk)("a",{href:"#","data-text":"果汁",onClick:t[8]||(t[8]=(0,c.D$)((e=>(Q.categoryName="果汁",K.updateCategory("果汁"),K.changeClass(3))),["prevent"])),class:(0,i.C4)({active:3===Q.isActive})}," 果汁 ",2)]),(0,s.Lk)("li",v,[(0,s.Lk)("a",{href:"#","data-text":"冰沙",onClick:t[9]||(t[9]=(0,c.D$)((e=>(Q.categoryName="冰沙",K.updateCategory("冰沙"),K.changeClass(4))),["prevent"])),class:(0,i.C4)({active:4===Q.isActive})}," 冰沙 ",2)]),(0,s.Lk)("li",k,[(0,s.Lk)("a",{href:"#","data-text":"甜點",onClick:t[10]||(t[10]=(0,c.D$)((e=>(Q.categoryName="甜點",K.updateCategory("甜點"),K.changeClass(5))),["prevent"])),class:(0,i.C4)({active:5===Q.isActive})}," 甜點 ",2)]),(0,s.Lk)("li",C,[(0,s.Lk)("a",{href:"#","data-text":"組合餐",onClick:t[11]||(t[11]=(0,c.D$)((e=>(Q.categoryName="組合餐",K.updateCategory("組合餐"),K.changeClass(6))),["prevent"])),class:(0,i.C4)({active:6===Q.isActive})},"組合餐 ",2)])])]),(0,s.Lk)("div",m,[(0,s.Lk)("div",L,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(K.productsFilter,(e=>((0,s.uX)(),(0,s.CE)("div",{class:"col mb-4",key:e.id},[(0,s.Lk)("div",y,[(0,s.Lk)("a",{onClick:t=>K.getProductPage(e.id)},[e.origin_price!==e.price?((0,s.uX)(),(0,s.CE)("div",x," 特 價 ")):(0,s.Q3)("",!0),(0,s.Lk)("div",_,[(0,s.Lk)("img",{src:`${e.imageUrl}`,alt:e.title,class:"object-fit-cover"},null,8,b)]),(0,s.Lk)("p",$,(0,i.v_)(e.title),1),(0,s.Lk)("div",A,[e.origin_price!==e.price?((0,s.uX)(),(0,s.CE)("div",N,[(0,s.Lk)("p",P,"NT$ "+(0,i.v_)(e.price),1)])):(0,s.Q3)("",!0),e.origin_price===e.price?((0,s.uX)(),(0,s.CE)("div",D,[(0,s.Lk)("p",w,"NT$ "+(0,i.v_)(e.price),1)])):(0,s.Q3)("",!0),e.origin_price!==e.price?((0,s.uX)(),(0,s.CE)("div",E,[(0,s.Lk)("p",X," NT$ "+(0,i.v_)(e.origin_price),1)])):(0,s.Q3)("",!0)])],8,f)])])))),128))]),(0,s.Lk)("div",F,[(0,s.bF)(S,{pages:Q.pagination,onEmitPages:K.getProducts},null,8,["pages","onEmitPages"])])])])])],64)}a(4114),a(8111),a(2489);var Q=a(5749),K={data(){return{products:[],categoryName:"",isActive:1,pagination:{},carts:[],isLoading:!1,currentPage:""}},components:{Pagination:Q.A},methods:{getProducts(e=1){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/guantony-api/products/all";this.$http.get(t).then((t=>{if(!t.data.success)return void(this.isLoading=!1);this.products=t.data.products;const{categoryName:a}=this.$route.params;a&&(this.categoryName=a),""!==this.categoryName?this.pagination={}:(this.setPagination(e),this.updateCategory()),this.isLoading=!1})).catch((e=>{this.$httpMessageState(e,"連線錯誤，請再試一次"),this.isLoading=!1}))},setPagination(e=1){const t=10;this.pagination={total_pages:Math.ceil(this.products.length/t),current_page:e,has_pre:1!==e,has_next:!1,category:null},this.pagination.current_page>=this.pagination.total_pages?(this.pagination.current_page=this.pagination.total_pages,this.pagination.has_next=!1):this.pagination.has_next=!0;const a=this.pagination.current_page*t-t,s=this.pagination.current_page*t;this.products=this.products.slice(a,s)},updateCategory(e){this.$router.push({name:"所有商品列表",params:{categoryName:e}})},getCart(){const e="https://vue3-course-api.hexschool.io/api/guantony-api/cart";this.$http.get(e).then((e=>{this.carts=e.data.data.carts})).catch((e=>{this.$httpMessageState(e,"連線錯誤")}))},getProductPage(e){this.$router.push(`/products/${e}`)},changeClass(e){this.isActive=e}},watch:{categoryName(e,t){""!==e&&""!==t||this.getProducts()}},computed:{productsFilter(){return this.products.filter((e=>e.category.match(this.categoryName)))}},created(){this.getProducts()}},M=a(1241);const S=(0,M.A)(K,[["render",j]]);var T=S}}]);
//# sourceMappingURL=643.b8ed886d.js.map