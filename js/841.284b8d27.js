"use strict";(self["webpackChunkvue3_final_challenge"]=self["webpackChunkvue3_final_challenge"]||[]).push([[841],{1841:function(t,e,s){s.r(e),s.d(e,{default:function(){return U}});s(4114);var l=s(6768),a=s(4232),n=s(5130);const r={class:"order_search"},i={class:"container mainContainer",style:{"padding-top":"100px","padding-bottom":"100px"}},c={class:"py-4 py-lg-5"},d={class:"row row-cols-1 justify-content-center align-items-center"},o={class:"col-10 col-lg-3 px-0 mb-3 mb-lg-0"},u={class:"col col-lg-2 px-0 d-flex justify-content-center"},k={key:0,class:"text-center my-5"},h={key:1,class:"my-5"},p={class:"d-none d-lg-block"},L={class:"table my-3 table-hover"},b={class:"align-middle"},m={class:"fw-bolder"},v={class:"list-unstyled"},y={key:0,class:"text-danger"},g={key:1,class:"text-success"},C=["onClick"],f=["onClick"],_={class:"d-lg-none"},E={class:"row mt-3"},O={class:"col-4"},X={class:"mb-0"},x={class:"col-8"},$={class:"mb-0"},w={class:"py-3 border-top border-bottom mt-3"},F={class:"list-unstyled mb-0"},S={class:"row mt-3 mb-3"},I={class:"col-5 d-flex align-items-center"},K={class:"mb-0 ms-3"},D={class:"col-7 d-flex justify-content-end align-items-center"},M={key:0,class:"text-danger me-3 mb-0"},j={key:1,class:"text-success me-3 mb-0"},V=["onClick"],q=["onClick"];function A(t,e,s,A,H,Q){const T=(0,l.g2)("Loading"),U=(0,l.g2)("Field"),z=(0,l.g2)("Form");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(T,{active:H.isLoading},{default:(0,l.k6)((()=>e[2]||(e[2]=[(0,l.Lk)("section",null,[(0,l.Lk)("span",{class:"loader-18"})],-1)]))),_:1},8,["active"]),(0,l.Lk)("div",r,[(0,l.Lk)("div",i,[e[10]||(e[10]=(0,l.Lk)("h3",{class:"text-center"},"訂單查詢",-1)),(0,l.Lk)("div",c,[(0,l.bF)(z,{onSubmit:Q.searchOrder},{default:(0,l.k6)((()=>[(0,l.Lk)("div",d,[(0,l.Lk)("div",o,[(0,l.bF)(U,{id:"orderId",class:"form-control w-100",name:"search",type:"text",placeholder:"請輸入Email or 電話",modelValue:H.search,"onUpdate:modelValue":e[0]||(e[0]=t=>H.search=t)},null,8,["modelValue"])]),(0,l.Lk)("div",u,[(0,l.Lk)("button",{class:"btnHover ms-3",onClick:e[1]||(e[1]=(...e)=>t.push&&t.push(...e))},e[3]||(e[3]=[(0,l.Lk)("div",null,[(0,l.Lk)("span",null,"查詢"),(0,l.Lk)("span",null,"查詢")],-1)]))])])])),_:1},8,["onSubmit"]),H.searchState&&0===H.filterOrder.length?((0,l.uX)(),(0,l.CE)("div",k,e[4]||(e[4]=[(0,l.Lk)("div",null,[(0,l.Lk)("p",null,"查無資料，請重新查詢。")],-1)]))):H.searchState&&0!==H.filterOrder.length?((0,l.uX)(),(0,l.CE)("div",h,[(0,l.Lk)("div",p,[(0,l.Lk)("table",L,[e[5]||(e[5]=(0,l.Lk)("thead",null,[(0,l.Lk)("tr",null,[(0,l.Lk)("th",null,"建立日期"),(0,l.Lk)("th",null,"訂單編號"),(0,l.Lk)("th",null,"商品明細"),(0,l.Lk)("th",null,"總金額"),(0,l.Lk)("th",null,"付款狀態"),(0,l.Lk)("th")])],-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(H.filterOrder,(e=>((0,l.uX)(),(0,l.CE)("tbody",{key:e.id,class:"searchTbody"},[(0,l.Lk)("tr",b,[(0,l.Lk)("td",m,(0,a.v_)(t.$filters.date(e.create_at)),1),(0,l.Lk)("td",null,(0,a.v_)(e.id),1),(0,l.Lk)("td",null,[(0,l.Lk)("ul",v,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(e.products,(t=>((0,l.uX)(),(0,l.CE)("li",{key:t.id}," - "+(0,a.v_)(t.product.title)+" - "+(0,a.v_)(t.qty)+" "+(0,a.v_)(t.product.unit),1)))),128))])]),(0,l.Lk)("td",null,"$"+(0,a.v_)(t.$filters.currency(Math.round(e.total))),1),(0,l.Lk)("td",null,[e.is_paid?((0,l.uX)(),(0,l.CE)("span",g,"付款完成")):((0,l.uX)(),(0,l.CE)("span",y,"尚未付款"))]),(0,l.Lk)("td",null,[e.is_paid?((0,l.uX)(),(0,l.CE)("button",{key:0,class:"btn btn-outline-success btn-sm",onClick:(0,n.D$)((t=>Q.payOrder(e.id)),["prevent"])}," 檢視 ",8,C)):((0,l.uX)(),(0,l.CE)("button",{key:1,class:"btn btn-outline-danger btn-sm",type:"button",onClick:(0,n.D$)((t=>Q.payOrder(e.id)),["prevent"])}," 檢視、付款 ",8,f))])])])))),128))])]),(0,l.Lk)("div",_,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(H.filterOrder,(s=>((0,l.uX)(),(0,l.CE)("div",{class:"mx-2 my-3 px-2 border rounded-3",key:s.id},[(0,l.Lk)("div",E,[(0,l.Lk)("div",O,[e[6]||(e[6]=(0,l.Lk)("h6",{class:"mb-0"},"建立日期",-1)),(0,l.Lk)("p",X,(0,a.v_)(t.$filters.date(s.create_at)),1)]),(0,l.Lk)("div",x,[e[7]||(e[7]=(0,l.Lk)("h6",{class:"mb-0"},"訂單編號",-1)),(0,l.Lk)("p",$,(0,a.v_)(s.id),1)])]),(0,l.Lk)("div",w,[e[8]||(e[8]=(0,l.Lk)("h6",{class:"mb-0"},"商品明細",-1)),(0,l.Lk)("ul",F,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.products,(t=>((0,l.uX)(),(0,l.CE)("li",{key:t.id}," - "+(0,a.v_)(t.product.title)+" - "+(0,a.v_)(t.qty)+" "+(0,a.v_)(t.product.unit),1)))),128))])]),(0,l.Lk)("div",S,[(0,l.Lk)("div",I,[e[9]||(e[9]=(0,l.Lk)("h6",{class:"mb-0"},"總金額",-1)),(0,l.Lk)("p",K," $"+(0,a.v_)(t.$filters.currency(Math.round(s.total))),1)]),(0,l.Lk)("div",D,[s.is_paid?((0,l.uX)(),(0,l.CE)("p",j,"付款完成")):((0,l.uX)(),(0,l.CE)("p",M," 尚未付款 ")),s.is_paid?((0,l.uX)(),(0,l.CE)("button",{key:2,class:"btn btn-outline-success btn-sm",onClick:(0,n.D$)((t=>Q.payOrder(s.id)),["prevent"])}," 檢視 ",8,V)):((0,l.uX)(),(0,l.CE)("button",{key:3,class:"btn btn-outline-danger btn-sm",type:"button",onClick:(0,n.D$)((t=>Q.payOrder(s.id)),["prevent"])}," 檢視、付款 ",8,q))])])])))),128))])])):(0,l.Q3)("",!0)])])])],64)}s(8111),s(2489);var H={data(){return{OrderList:[],pagination:{},search:"",filterOrder:{},searchState:!1,isLoading:!1,email:"",carts:[]}},methods:{getOrder(t=1){const e=`https://vue3-course-api.hexschool.io/api/guantony-api/orders?page=${t}`;this.$http.get(e).then((t=>{t.data.success&&(this.OrderList=t.data.orders,this.pagination=t.data.pagination)})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))},searchOrder(){this.isLoading=!0,this.searchState=!0,this.filterOrder=this.OrderList.filter((t=>t.user.email===this.search||t.user.tel===this.search)),this.isLoading=!1,this.email=this.searchEmail,this.getOrder()},payOrder(t){window.open(this.$router.resolve({path:`/pay/${t}`}).href,"_blank")},getCart(){const t="https://vue3-course-api.hexschool.io/api/guantony-api/cart";this.$http.get(t).then((t=>{this.carts=t.data.data.carts})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))}},created(){this.getOrder()}},Q=s(1241);const T=(0,Q.A)(H,[["render",A]]);var U=T}}]);
//# sourceMappingURL=841.284b8d27.js.map