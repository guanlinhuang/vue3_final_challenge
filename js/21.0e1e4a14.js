"use strict";(self["webpackChunkvue3_final_challenge"]=self["webpackChunkvue3_final_challenge"]||[]).push([[21],{4021:function(l,e,s){s.r(e),s.d(e,{default:function(){return pl}});s(4114);var a=s(6768),t=s(4232),c=s(5130);const r={class:"container mainContainer userOrder"},o={class:"my-lg-5 row justify-content-center"},n={class:"col col-lg-6 me-4 d-none d-lg-block"},d={class:"mx-auto table align-middle"},i={style:{width:"70px"}},u={style:{width:"70px",height:"100px"}},m=["src","alt"],p={class:"align-top"},k=["onClick"],b={class:"text-center"},L={class:"text-center"},v={class:"text-center"},f={colspan:"3"},g={style:{"padding-right":"5px"}},h={class:"mb-0 text-end"},x={colspan:"3"},y={style:{"padding-right":"5px"}},_={class:"mb-0 text-end"},w={class:"fs-3 text-success"},C={key:0,style:{"padding-right":"5px"}},V={class:"d-flex justify-content-end"},F={class:"col-lg-4 d-none d-lg-block"},$={class:"mb-3"},O={class:"mb-3"},E={class:"mb-3"},P={class:"mb-3"},S={class:"mb-3"},U={class:"d-lg-none mt-3"},W={class:"mb-3"},N={class:"mb-3"},q={class:"mb-3"},H={class:"mb-3"},M={class:"mb-3"},j={class:"d-lg-none mt-3 gx-0 m-1"},T={class:"col col-lg-7"},X={class:"accordion",id:"accordionPanelsStayOpenExample"},I={class:"accordion-item"},J={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse","aria-labelledby":"panelsStayOpen-headingOne"},K={class:"table"},Q={style:{width:"70px"}},A={style:{width:"70px",height:"100px"}},z=["src","alt"],B={class:"align-top"},D={class:"d-flex mt-3 justify-content-between"},G=["onClick"],R={class:"me-2"},Y={class:"mb-0 mb-3"},Z={class:"mb-0"},ll={class:"me-2"},el={class:"mb-0 text-end"},sl={class:"me-2"},al={class:"mb-0 text-end"},tl={class:"fs-3 text-success"},cl={key:0,style:{"padding-right":"5px"}},rl={class:"row px-2 gx-2 mb-2"},ol={class:"col"},nl={class:"col"};function dl(l,e,s,dl,il,ul){const ml=(0,a.g2)("router-link"),pl=(0,a.g2)("Field"),kl=(0,a.g2)("ErrorMessage"),bl=(0,a.g2)("Form");return(0,a.uX)(),(0,a.CE)("div",r,[e[46]||(e[46]=(0,a.Fv)('<div class="pt-3 process d-flex justify-content-center align-items-center"><div class="text-center mx-3"><i class="bi bi-cart-check fs-3"></i><div class="row row-cols-1 row-cols-lg-2"><div class="col px-0"><p class="mb-0">商品</p></div><div class="col px-0"><p class="mb-0">確認</p></div></div></div><span class="process_dark_line"></span><div class="process_dark text-center mx-3"><i class="bi bi-pen fs-3"></i><div class="row row-cols-1 row-cols-lg-2"><div class="col px-0"><p class="mb-0">資料</p></div><div class="col px-0"><p class="mb-0">填寫</p></div></div></div><div class="process_gray_line"></div><div class="process_gray text-center mx-3"><i class="bi bi-cash-coin fs-3"></i><div class="row row-cols-1 row-cols-lg-2"><div class="col px-0"><p class="mb-0">資料</p></div><div class="col px-0"><p class="mb-0">確認</p></div></div></div><div class="process_gray_line"></div><div class="process_gray text-center mx-3"><i class="bi bi-cart-check-fill fs-3"></i><div class="row row-cols-1 row-cols-lg-2"><div class="col px-0"><p class="mb-0">訂單</p></div><div class="col px-0"><p class="mb-0">完成</p></div></div></div></div>',1)),(0,a.Lk)("div",o,[(0,a.Lk)("div",n,[(0,a.Lk)("table",d,[e[19]||(e[19]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",{class:"text-center"},[(0,a.Lk)("th"),(0,a.Lk)("th",{class:"text-start"},"商品"),(0,a.Lk)("th",null,"數量"),(0,a.Lk)("th",null,"單價"),(0,a.Lk)("th",null,"總價")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(il.cart.carts,(l=>((0,a.uX)(),(0,a.CE)("tr",{key:l.id},[(0,a.Lk)("td",i,[(0,a.Lk)("div",u,[(0,a.Lk)("img",{src:l.product.imageUrl,alt:l.product.title,class:"w-100 h-100 object-fit-cover"},null,8,m)])]),(0,a.Lk)("td",p,[(0,a.Lk)("a",{class:"productName text-decoration-none text-dark",onClick:e=>ul.getProductPage(l.product.id)},(0,t.v_)(l.product.title),9,k)]),(0,a.Lk)("td",b,(0,t.v_)(l.qty),1),(0,a.Lk)("td",L,"$"+(0,t.v_)(l.product.price),1),(0,a.Lk)("td",v,"$"+(0,t.v_)(l.total),1)])))),128))]),(0,a.Lk)("tfoot",null,[(0,a.Lk)("tr",null,[e[14]||(e[14]=(0,a.Lk)("td",null,null,-1)),e[15]||(e[15]=(0,a.Lk)("td",null,null,-1)),(0,a.Lk)("td",f,[(0,a.Lk)("div",g,[(0,a.Lk)("p",h," 商品總價    NT$ "+(0,t.v_)(l.$filters.currency(Math.round(il.cart.total))),1)])])]),(0,a.Lk)("tr",null,[e[18]||(e[18]=(0,a.Lk)("td",{colspan:"2"},null,-1)),(0,a.Lk)("td",x,[(0,a.Lk)("div",y,[(0,a.Lk)("p",_,[e[16]||(e[16]=(0,a.eW)(" 總金額  ")),(0,a.Lk)("span",w," NT$ "+(0,t.v_)(l.$filters.currency(Math.round(il.cart.final_total))),1)])]),il.cart.final_total!==il.cart.total?((0,a.uX)(),(0,a.CE)("div",C,e[17]||(e[17]=[(0,a.Lk)("p",{class:"mb-0 text-end text-danger"},"(已套用優惠券)",-1)]))):(0,a.Q3)("",!0)])])])]),(0,a.Lk)("div",V,[(0,a.bF)(ml,{to:"/productsall",type:"button",class:"mt-3 py-2 me-3 btnHover d-block"},{default:(0,a.k6)((()=>e[20]||(e[20]=[(0,a.Lk)("div",null,[(0,a.Lk)("span",null,"繼續選購"),(0,a.Lk)("span",null,"繼續選購")],-1)]))),_:1}),(0,a.Lk)("button",{class:"mt-3 py-2 btnHover",onClick:e[0]||(e[0]=l=>ul.backToPage())},e[21]||(e[21]=[(0,a.Lk)("div",null,[(0,a.Lk)("span",null,"返回購物車"),(0,a.Lk)("span",null,"返回購物車")],-1)]))])]),(0,a.Lk)("div",F,[(0,a.bF)(bl,{class:"border p-3",onSubmit:ul.createOrder},{default:(0,a.k6)((({errors:s})=>[e[29]||(e[29]=(0,a.Lk)("h2",{class:"text-center"},"顧客資訊",-1)),(0,a.Lk)("div",$,[e[22]||(e[22]=(0,a.Lk)("label",{for:"name",class:"form-label"},[(0,a.eW)("姓名"),(0,a.Lk)("span",{class:"text-danger"},"*")],-1)),e[23]||(e[23]=(0,a.Lk)("br",null,null,-1)),(0,a.bF)(pl,{id:"name",class:(0,t.C4)(["form-control",{"is-invalid":s["姓名"]}]),type:"text",name:"姓名",placeholder:"請輸入姓名",modelValue:il.form.user.name,"onUpdate:modelValue":e[1]||(e[1]=l=>il.form.user.name=l),rules:"required"},null,8,["modelValue","class"]),(0,a.bF)(kl,{name:"姓名",class:"invalid-feedback"})]),(0,a.Lk)("div",O,[e[24]||(e[24]=(0,a.Lk)("label",{for:"tel",class:"form-label"},[(0,a.eW)("手機號碼"),(0,a.Lk)("span",{class:"text-danger"},"*")],-1)),(0,a.bF)(pl,{id:"tel",name:"手機號碼",type:"tel",class:(0,t.C4)(["form-control",{"is-invalid":s["手機號碼"]}]),placeholder:"請輸入手機號碼",rules:ul.isPhoneNumber,modelValue:il.form.user.tel,"onUpdate:modelValue":e[2]||(e[2]=l=>il.form.user.tel=l)},null,8,["class","rules","modelValue"]),(0,a.bF)(kl,{name:"手機號碼",class:"invalid-feedback"})]),(0,a.Lk)("div",E,[e[25]||(e[25]=(0,a.Lk)("label",{for:"email",class:"form-label"},[(0,a.eW)("Email"),(0,a.Lk)("span",{class:"text-danger"},"*")],-1)),(0,a.bF)(pl,{id:"email",name:"email",type:"email",class:(0,t.C4)(["form-control",{"is-invalid":s["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:il.form.user.email,"onUpdate:modelValue":e[3]||(e[3]=l=>il.form.user.email=l)},null,8,["class","modelValue"]),(0,a.bF)(kl,{name:"email",class:"invalid-feedback"})]),(0,a.Lk)("div",P,[e[26]||(e[26]=(0,a.Lk)("label",{for:"address",class:"form-label"},[(0,a.eW)("地址"),(0,a.Lk)("span",{class:"text-danger"},"*")],-1)),(0,a.bF)(pl,{id:"address",name:"地址",type:"text",class:(0,t.C4)(["form-control",{"is-invalid":s["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:il.form.user.address,"onUpdate:modelValue":e[4]||(e[4]=l=>il.form.user.address=l)},null,8,["class","modelValue"]),(0,a.bF)(kl,{name:"地址",class:"invalid-feedback"})]),(0,a.Lk)("div",S,[e[27]||(e[27]=(0,a.Lk)("label",{for:"message",class:"form-label"},"留言",-1)),(0,a.bo)((0,a.Lk)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[5]||(e[5]=l=>il.form.message=l)},null,512),[[c.Jo,il.form.message]])]),(0,a.Lk)("button",{class:"mt-3 py-2 btnHover btnHover5 w-100",onClick:e[6]||(e[6]=(...e)=>l.push&&l.push(...e))},e[28]||(e[28]=[(0,a.Lk)("div",null,[(0,a.Lk)("span",null,"送出訂單"),(0,a.Lk)("span",null,"送出訂單")],-1)]))])),_:1},8,["onSubmit"])])]),(0,a.Lk)("div",U,[(0,a.bF)(bl,{class:"p-2",onSubmit:ul.createOrder},{default:(0,a.k6)((({errors:s})=>[e[37]||(e[37]=(0,a.Lk)("h2",{class:"text-center"},"顧客資訊",-1)),(0,a.Lk)("div",W,[e[30]||(e[30]=(0,a.Lk)("label",{for:"name",class:"form-label ms-1"},[(0,a.eW)("姓名"),(0,a.Lk)("span",{class:"text-danger"},"*")],-1)),e[31]||(e[31]=(0,a.Lk)("br",null,null,-1)),(0,a.bF)(pl,{id:"name",class:(0,t.C4)(["form-control",{"is-invalid":s["姓名"]}]),type:"text",name:"姓名",placeholder:"請輸入姓名",modelValue:il.form.user.name,"onUpdate:modelValue":e[7]||(e[7]=l=>il.form.user.name=l),rules:"required"},null,8,["modelValue","class"]),(0,a.bF)(kl,{name:"姓名",class:"invalid-feedback"})]),(0,a.Lk)("div",N,[e[32]||(e[32]=(0,a.Lk)("label",{for:"tel",class:"form-label ms-1"},[(0,a.eW)("手機號碼"),(0,a.Lk)("span",{class:"text-danger"},"*")],-1)),(0,a.bF)(pl,{id:"tel",name:"手機號碼",type:"tel",class:(0,t.C4)(["form-control",{"is-invalid":s["手機號碼"]}]),placeholder:"請輸入手機號碼",rules:ul.isPhoneNumber,modelValue:il.form.user.tel,"onUpdate:modelValue":e[8]||(e[8]=l=>il.form.user.tel=l)},null,8,["class","rules","modelValue"]),(0,a.bF)(kl,{name:"手機號碼",class:"invalid-feedback"})]),(0,a.Lk)("div",q,[e[33]||(e[33]=(0,a.Lk)("label",{for:"email",class:"form-label ms-1"},[(0,a.eW)("Email"),(0,a.Lk)("span",{class:"text-danger"},"*")],-1)),(0,a.bF)(pl,{id:"email",name:"email",type:"email",class:(0,t.C4)(["form-control",{"is-invalid":s["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:il.form.user.email,"onUpdate:modelValue":e[9]||(e[9]=l=>il.form.user.email=l)},null,8,["class","modelValue"]),(0,a.bF)(kl,{name:"email",class:"invalid-feedback"})]),(0,a.Lk)("div",H,[e[34]||(e[34]=(0,a.Lk)("label",{for:"address",class:"form-label ms-1"},[(0,a.eW)("地址"),(0,a.Lk)("span",{class:"text-danger"},"*")],-1)),(0,a.bF)(pl,{id:"address",name:"地址",type:"text",class:(0,t.C4)(["form-control",{"is-invalid":s["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:il.form.user.address,"onUpdate:modelValue":e[10]||(e[10]=l=>il.form.user.address=l)},null,8,["class","modelValue"]),(0,a.bF)(kl,{name:"地址",class:"invalid-feedback"})]),(0,a.Lk)("div",M,[e[35]||(e[35]=(0,a.Lk)("label",{for:"message",class:"form-label ms-1"},"留言",-1)),(0,a.bo)((0,a.Lk)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":e[11]||(e[11]=l=>il.form.message=l)},null,512),[[c.Jo,il.form.message]])]),(0,a.Lk)("button",{class:"mt-3 py-2 btnHover btnHover5 w-100",onClick:e[12]||(e[12]=(...e)=>l.push&&l.push(...e))},e[36]||(e[36]=[(0,a.Lk)("div",null,[(0,a.Lk)("span",null,"送出訂單"),(0,a.Lk)("span",null,"送出訂單")],-1)]))])),_:1},8,["onSubmit"])]),(0,a.Lk)("div",j,[(0,a.Lk)("div",T,[(0,a.Lk)("div",X,[(0,a.Lk)("div",I,[e[45]||(e[45]=(0,a.Lk)("h2",{class:"accordion-header",id:"panelsStayOpen-headingOne"},[(0,a.Lk)("button",{class:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"}," 商品明細 ")],-1)),(0,a.Lk)("div",J,[e[44]||(e[44]=(0,a.Lk)("div",{class:"accordion-body"},null,-1)),(0,a.Lk)("table",K,[(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(il.cart.carts,(l=>((0,a.uX)(),(0,a.CE)("tr",{key:l.id,class:"border-top border-bottom"},[(0,a.Lk)("td",Q,[(0,a.Lk)("div",A,[(0,a.Lk)("img",{src:l.product.imageUrl,alt:l.product.title,class:"w-100 h-100 object-fit-cover"},null,8,z)])]),(0,a.Lk)("td",B,[(0,a.Lk)("div",D,[(0,a.Lk)("div",null,[(0,a.Lk)("a",{class:"productName text-decoration-none text-dark",onClick:e=>ul.getProductPage(l.product.id)},(0,t.v_)(l.product.title),9,G)]),(0,a.Lk)("div",R,[(0,a.Lk)("p",Y,"數量："+(0,t.v_)(l.qty),1),(0,a.Lk)("p",Z,"總價：$"+(0,t.v_)(l.total),1)])])])])))),128))]),(0,a.Lk)("tfoot",null,[(0,a.Lk)("tr",null,[e[38]||(e[38]=(0,a.Lk)("td",null,null,-1)),(0,a.Lk)("td",null,[(0,a.Lk)("div",ll,[(0,a.Lk)("p",el," 商品總價    NT$ "+(0,t.v_)(l.$filters.currency(Math.round(il.cart.total))),1)])])]),(0,a.Lk)("tr",null,[e[41]||(e[41]=(0,a.Lk)("td",null,null,-1)),(0,a.Lk)("td",null,[(0,a.Lk)("div",sl,[(0,a.Lk)("p",al,[e[39]||(e[39]=(0,a.eW)(" 總金額  ")),(0,a.Lk)("span",tl," NT$ "+(0,t.v_)(l.$filters.currency(Math.round(il.cart.final_total))),1)])]),il.cart.final_total!==il.cart.total?((0,a.uX)(),(0,a.CE)("div",cl,e[40]||(e[40]=[(0,a.Lk)("p",{class:"mb-0 text-end text-danger"},"(已套用優惠券)",-1)]))):(0,a.Q3)("",!0)])])])]),(0,a.Lk)("div",rl,[(0,a.Lk)("div",ol,[(0,a.bF)(ml,{to:"/productsall",type:"button",class:"mt-3 py-2 btnHover w-100 d-block"},{default:(0,a.k6)((()=>e[42]||(e[42]=[(0,a.Lk)("div",null,[(0,a.Lk)("span",null,"繼續選購"),(0,a.Lk)("span",null,"繼續選購")],-1)]))),_:1})]),(0,a.Lk)("div",nl,[(0,a.Lk)("button",{class:"mt-3 py-2 btnHover w-100",onClick:e[13]||(e[13]=l=>ul.backToPage())},e[43]||(e[43]=[(0,a.Lk)("div",null,[(0,a.Lk)("span",null,"返回購物車"),(0,a.Lk)("span",null,"返回購物車")],-1)]))])])])])])])])])}var il={data(){return{cart:{},coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""},carts:[]}},inject:["emitter"],methods:{getCart(){const l="https://vue3-course-api.hexschool.io/api/guantony-api/cart";this.$http.get(l).then((l=>{this.cart=l.data.data,this.carts=l.data.data.carts,this.emitter.emit("update-cart",this.carts)})).catch((l=>{this.$httpMessageState(l,"連線錯誤")}))},createOrder(){const l="https://vue3-course-api.hexschool.io/api/guantony-api/order",e=this.form;this.$http.post(l,{data:e}).then((l=>{if(l.data.success){const e=l.data.orderId;this.$router.push(`/pay/${e}`),this.$httpMessageState(l,"建立訂單"),this.getCart()}})).catch((l=>{this.$httpMessageState(l,"連線錯誤")}))},isPhoneNumber(l){const e=/^(09)[0-9]{8}$/;return!!e.test(l)||"手機號碼 為必填"},backToPage(){this.$router.go(-1)},getProductPage(l){this.$router.push(`/products/${l}`)}},created(){this.getCart()}},ul=s(1241);const ml=(0,ul.A)(il,[["render",dl]]);var pl=ml}}]);
//# sourceMappingURL=21.0e1e4a14.js.map