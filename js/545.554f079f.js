"use strict";(self["webpackChunkvue3_final_challenge"]=self["webpackChunkvue3_final_challenge"]||[]).push([[545],{1545:function(t,l,e){e.r(l),e.d(l,{default:function(){return vt}});var s=e(6768),a=e(4232),o=e(5130);const n={class:"container userCart mainContainer"},c={key:0,class:"pt-3"},i={class:"row justify-content-center mt-lg-5"},d={class:"col col-lg-7 me-4 d-none d-lg-block"},r={class:"mx-auto table align-middle"},u={class:"text-center"},p={class:"text-center"},b=["onClick"],k={style:{width:"70px"}},h={style:{width:"70px",height:"100px"}},v=["src","alt"],L={class:"align-top"},m=["onClick"],g={style:{width:"150px"}},y={class:"input-group"},x=["onClick","disabled"],f=["onChange","onUpdate:modelValue"],C=["onClick"],w={class:"text-center"},_={class:"text-center"},$={class:"d-flex justify-content-end"},M={class:"col col-lg-4 d-none d-lg-block"},P={class:"border px-3 pb-3"},j={class:"d-flex justify-content-between align-items-center my-3"},D={class:"fs-5 mb-0"},q={class:"d-flex justify-content-between align-items-center"},E={class:"input-group mb-3 w-100"},F={class:"d-flex justify-content-between align-items-center"},X={class:"mb-0 fs-3 text-success"},Q={key:0},U={class:"mt-3 mt-lg-0"},H={class:"d-lg-none"},N={class:"mx-auto table align-middle"},S={class:"text-end"},V={style:{width:"70px"}},A={style:{width:"70px",height:"100px"}},I=["src","alt"],J=["onClick"],T={class:"d-flex mt-4"},K={class:"input-group",style:{width:"100px",height:"30px"}},R=["onClick","disabled"],W=["onChange","onUpdate:modelValue"],z=["onClick"],B={class:"my-auto ms-3"},G=["onClick"],O={class:"d-block d-lg-none"},Y={class:"px-2 pb-3"},Z={class:"d-flex justify-content-between align-items-center my-3"},tt={class:"fs-5 mb-0"},lt={class:"d-flex justify-content-between align-items-center"},et={class:"input-group mb-3 w-100"},st={class:"d-flex justify-content-between align-items-center"},at={class:"mb-0 fs-3 text-success"},ot={key:0},nt={class:"row gx-2"},ct={class:"col-4"},it={class:"col-8"},dt={key:1},rt={class:"text-center my-5",style:{"padding-top":"150px","padding-bottom":"250px"}};function ut(t,l,e,ut,pt,bt){const kt=(0,s.g2)("router-link"),ht=(0,s.g2)("DelModal");return(0,s.uX)(),(0,s.CE)("div",n,[0!==pt.cart.total?((0,s.uX)(),(0,s.CE)("div",c,[l[32]||(l[32]=(0,s.Fv)('<div class="shopping_process d-flex justify-content-center align-items-center mx-4"><div class="text-center mx-3"><i class="bi bi-cart-check fs-3"></i><div class="row row-cols-1 row-cols-lg-2"><div class="col px-0"><p class="mb-0">商品</p></div><div class="col px-0"><p class="mb-0">確認</p></div></div></div><div class="process_gray_line"></div><div class="process_gray text-center mx-3"><i class="bi bi-pen fs-3"></i><div class="row row-cols-1 row-cols-lg-2"><div class="col px-0"><p class="mb-0">資料</p></div><div class="col px-0"><p class="mb-0">填寫</p></div></div></div><div class="process_gray_line"></div><div class="process_gray text-center mx-3"><i class="bi bi-cash-coin fs-3"></i><div class="row row-cols-1 row-cols-lg-2"><div class="col px-0"><p class="mb-0">資料</p></div><div class="col px-0"><p class="mb-0">確認</p></div></div></div><div class="process_gray_line"></div><div class="process_gray text-center mx-3"><i class="bi bi-cart-check-fill fs-3"></i><div class="row row-cols-1 row-cols-lg-2"><div class="col px-0"><p class="mb-0">訂單</p></div><div class="col px-0"><p class="mb-0">完成</p></div></div></div></div>',1)),(0,s.Lk)("div",i,[(0,s.Lk)("div",d,[(0,s.Lk)("table",r,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",u,[(0,s.Lk)("th",null,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l[0]||(l[0]=t=>bt.openDelProductModalAll())},l[6]||(l[6]=[(0,s.Lk)("i",{class:"bi bi-x-lg"},null,-1)]))]),l[7]||(l[7]=(0,s.Lk)("th",null,null,-1)),l[8]||(l[8]=(0,s.Lk)("th",{class:"text-start",style:{width:"250px"}},"商品",-1)),l[9]||(l[9]=(0,s.Lk)("th",null,"數量",-1)),l[10]||(l[10]=(0,s.Lk)("th",null,"單價",-1)),l[11]||(l[11]=(0,s.Lk)("th",null,"總價",-1))])]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(pt.cart.carts,(t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.id},[(0,s.Lk)("td",p,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l=>bt.openDelProductModal(t)},l[12]||(l[12]=[(0,s.Lk)("i",{class:"bi bi-x-lg"},null,-1)]),8,b)]),(0,s.Lk)("td",k,[(0,s.Lk)("div",h,[(0,s.Lk)("img",{src:t.product.imageUrl,alt:t.product.title,class:"w-100 h-100 object-fit-cover"},null,8,v)])]),(0,s.Lk)("td",L,[(0,s.Lk)("a",{class:"productName text-decoration-none text-dark",onClick:l=>bt.getProductPage(t.product.id)},(0,a.v_)(t.product.title),9,m)]),(0,s.Lk)("td",g,[(0,s.Lk)("div",y,[(0,s.Lk)("button",{class:"btn border-0",type:"button",onClick:l=>bt.changeQty(-1,t),disabled:1===t.qty},l[13]||(l[13]=[(0,s.Lk)("i",{class:"bi bi-dash-lg"},null,-1)]),8,x),(0,s.bo)((0,s.Lk)("input",{type:"number",class:"form-control text-center",onChange:l=>bt.updateCart(t),"onUpdate:modelValue":l=>t.qty=l,min:"1",readonly:""},null,40,f),[[o.Jo,t.qty,void 0,{number:!0}]]),(0,s.Lk)("button",{class:"btn border-0",type:"button",onClick:l=>bt.changeQty(1,t)},l[14]||(l[14]=[(0,s.Lk)("i",{class:"bi bi-plus-lg"},null,-1)]),8,C)])]),(0,s.Lk)("td",w,"$"+(0,a.v_)(t.product.price),1),(0,s.Lk)("td",_,"$"+(0,a.v_)(t.total),1)])))),128))])]),(0,s.Lk)("div",$,[(0,s.bF)(kt,{to:"/productsall",type:"button",class:"mt-3 py-2 btnHover"},{default:(0,s.k6)((()=>l[15]||(l[15]=[(0,s.Lk)("div",null,[(0,s.Lk)("span",null,"繼續選購"),(0,s.Lk)("span",null,"繼續選購")],-1)]))),_:1})])]),(0,s.Lk)("div",M,[(0,s.Lk)("div",P,[(0,s.Lk)("div",j,[l[16]||(l[16]=(0,s.Lk)("p",{class:"mb-0"},"商品總價",-1)),(0,s.Lk)("p",D," NT$"+(0,a.v_)(t.$filters.currency(Math.round(pt.cart.total))),1)]),(0,s.Lk)("div",q,[(0,s.Lk)("div",E,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control noline",placeholder:"請輸入優惠碼","onUpdate:modelValue":l[1]||(l[1]=t=>pt.coupon_code=t),"aria-label":"Recipient's username","aria-describedby":"button-addon2"},null,512),[[o.Jo,pt.coupon_code]]),(0,s.Lk)("button",{class:"btn btn-outline",type:"button",id:"button-addon2",onClick:l[2]||(l[2]=(...t)=>bt.addCouponCode&&bt.addCouponCode(...t))}," 套用優惠碼 ")])]),l[20]||(l[20]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",F,[l[17]||(l[17]=(0,s.Lk)("p",{class:"mb-0"},"總金額",-1)),(0,s.Lk)("p",X," NT$"+(0,a.v_)(t.$filters.currency(Math.round(pt.cart.final_total))),1)]),pt.cart.final_total!==pt.cart.total?((0,s.uX)(),(0,s.CE)("div",Q,l[18]||(l[18]=[(0,s.Lk)("p",{class:"mb-0 text-end text-danger"},"(已套用優惠券)",-1)]))):(0,s.Q3)("",!0),(0,s.Lk)("div",null,[(0,s.bF)(kt,{to:"/order",type:"button",class:"mt-3 py-2 btnHover btnHover5 w-100"},{default:(0,s.k6)((()=>l[19]||(l[19]=[(0,s.Lk)("div",null,[(0,s.Lk)("span",null,"下一步"),(0,s.Lk)("span",null,"下一步")],-1)]))),_:1})])])])]),(0,s.Lk)("div",U,[(0,s.Lk)("div",H,[(0,s.Lk)("table",N,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",S,[l[22]||(l[22]=(0,s.Lk)("th",null,null,-1)),(0,s.Lk)("th",null,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:l[3]||(l[3]=t=>bt.openDelProductModalAll())},l[21]||(l[21]=[(0,s.Lk)("i",{class:"bi bi-x-lg"},null,-1)]))])])]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(pt.cart.carts,(t=>((0,s.uX)(),(0,s.CE)("tr",{key:t.id},[(0,s.Lk)("td",V,[(0,s.Lk)("div",A,[(0,s.Lk)("img",{src:t.product.imageUrl,alt:t.product.title,class:"w-100 h-100 object-fit-cover"},null,8,I)])]),(0,s.Lk)("td",null,[(0,s.Lk)("a",{class:"productName text-decoration-none text-dark",onClick:l=>bt.getProductPage(t.product.id)},(0,a.v_)(t.product.title),9,J),(0,s.Lk)("div",T,[(0,s.Lk)("div",K,[(0,s.Lk)("button",{class:"btn border-0 p-1",type:"button",onClick:l=>bt.changeQty(-1,t),disabled:1===t.qty},l[23]||(l[23]=[(0,s.Lk)("i",{class:"bi bi-dash"},null,-1)]),8,R),(0,s.bo)((0,s.Lk)("input",{type:"number",class:"form-control text-center noline p-0",onChange:l=>bt.updateCart(t),"onUpdate:modelValue":l=>t.qty=l,min:"1",readonly:""},null,40,W),[[o.Jo,t.qty,void 0,{number:!0}]]),(0,s.Lk)("button",{class:"btn border-0 p-1",type:"button",onClick:l=>bt.changeQty(1,t)},l[24]||(l[24]=[(0,s.Lk)("i",{class:"bi bi-plus"},null,-1)]),8,z)]),(0,s.Lk)("p",B,"$"+(0,a.v_)(t.total),1),(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm ms-auto",onClick:l=>bt.openDelProductModal(t)},l[25]||(l[25]=[(0,s.Lk)("i",{class:"bi bi-x-lg"},null,-1)]),8,G)])])])))),128))])])]),(0,s.Lk)("div",O,[(0,s.Lk)("div",Y,[(0,s.Lk)("div",Z,[l[26]||(l[26]=(0,s.Lk)("p",{class:"mb-0"},"商品總價",-1)),(0,s.Lk)("p",tt," NT$"+(0,a.v_)(t.$filters.currency(Math.round(pt.cart.total))),1)]),(0,s.Lk)("div",lt,[(0,s.Lk)("div",et,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control noline",placeholder:"請輸入優惠碼","onUpdate:modelValue":l[4]||(l[4]=t=>pt.coupon_code=t),"aria-label":"Recipient's username","aria-describedby":"button-addon2"},null,512),[[o.Jo,pt.coupon_code]]),(0,s.Lk)("button",{class:"btn btn-outline",type:"button",id:"button-addon2",onClick:l[5]||(l[5]=(...t)=>bt.addCouponCode&&bt.addCouponCode(...t))}," 套用優惠碼 ")])]),l[31]||(l[31]=(0,s.Lk)("hr",null,null,-1)),(0,s.Lk)("div",st,[l[27]||(l[27]=(0,s.Lk)("p",{class:"mb-0"},"總金額",-1)),(0,s.Lk)("p",at," NT$"+(0,a.v_)(t.$filters.currency(Math.round(pt.cart.final_total))),1)]),pt.cart.final_total!==pt.cart.total?((0,s.uX)(),(0,s.CE)("div",ot,l[28]||(l[28]=[(0,s.Lk)("p",{class:"mb-0 text-end text-danger"},"(已套用優惠券)",-1)]))):(0,s.Q3)("",!0),(0,s.Lk)("div",nt,[(0,s.Lk)("div",ct,[(0,s.bF)(kt,{to:"/productsall",type:"button",class:"mt-3 py-2 btnHover w-100 d-block",style:{"min-width":"0px"}},{default:(0,s.k6)((()=>l[29]||(l[29]=[(0,s.Lk)("div",null,[(0,s.Lk)("span",null,"繼續選購"),(0,s.Lk)("span",null,"繼續選購")],-1)]))),_:1})]),(0,s.Lk)("div",it,[(0,s.bF)(kt,{to:"/order",type:"button",class:"mt-3 py-2 btnHover btnHover5 w-100 d-block"},{default:(0,s.k6)((()=>l[30]||(l[30]=[(0,s.Lk)("div",null,[(0,s.Lk)("span",null,"下一步"),(0,s.Lk)("span",null,"下一步")],-1)]))),_:1})])])])])])])):((0,s.uX)(),(0,s.CE)("div",dt,[(0,s.Lk)("div",rt,[l[34]||(l[34]=(0,s.Lk)("p",{class:"fs-4 ls"},"您的購物車目前是空的唷！",-1)),(0,s.bF)(kt,{to:"/productsall",type:"button",class:"btnHover btn-lg rounded-0 mt-3 d-block w-25 mx-auto"},{default:(0,s.k6)((()=>l[33]||(l[33]=[(0,s.Lk)("div",null,[(0,s.Lk)("span",null,[(0,s.eW)("去逛逛商店 "),(0,s.Lk)("i",{class:"bi bi-arrow-right"})]),(0,s.Lk)("span",null,[(0,s.eW)("去逛逛商店 "),(0,s.Lk)("i",{class:"bi bi-arrow-right"})])],-1)]))),_:1})])])),(0,s.bF)(ht,{item:pt.product,ref:"delModal",onDelItem:bt.delProduct},null,8,["item","onDelItem"])])}e(4114);var pt=e(2821),bt={data(){return{cart:{},carts:[],coupon_code:"",productsQty:"",tempProduct:{},product:{}}},components:{DelModal:pt.A},inject:["emitter"],methods:{getCart(){const t="https://vue3-course-api.hexschool.io/api/guantony-api/cart";this.$http.get(t).then((t=>{this.cart=t.data.data,this.carts=t.data.data.carts,this.emitter.emit("update-cart",this.carts)})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))},updateCart(t){const l=`https://vue3-course-api.hexschool.io/api/guantony-api/cart/${t.id}`,e={product_id:t.product_id,qty:t.qty};this.$http.put(l,{data:e}).then((t=>{this.getCart()})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))},changeQty(t,l){l.qty+=t,this.updateCart(l)},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/guantony-api/coupon",l={code:this.coupon_code};this.$http.post(t,{data:l}).then((t=>{this.$httpMessageState(t,"加入優惠券"),this.getCart()})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))},openDelProductModal(t){this.tempProduct={...t},this.product=this.tempProduct.product;const l=this.$refs.delModal;l.showModal()},openDelProductModalAll(){this.product.title="所有商品";const t=this.$refs.delModal;t.showModal()},delProduct(){if("所有商品"!==this.product.title){const t=`https://vue3-course-api.hexschool.io/api/guantony-api/cart/${this.tempProduct.id}`;this.$http.delete(t).then((t=>{const l=this.$refs.delModal;l.hideModal(),this.getCart()})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))}else{const t="https://vue3-course-api.hexschool.io/api/guantony-api/carts";this.$http.delete(t).then((t=>{const l=this.$refs.delModal;l.hideModal(),this.getCart()})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))}},getProductPage(t){this.$router.push(`/products/${t}`)}},created(){this.getCart()}},kt=e(1241);const ht=(0,kt.A)(bt,[["render",ut]]);var vt=ht}}]);
//# sourceMappingURL=545.554f079f.js.map