{"version":3,"file":"js/998.6fa98478.js","mappings":"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","sources":["webpack://vue3_final_challenge/./src/methods/saveFavorite.js","webpack://vue3_final_challenge/./src/views/user/UserFavorite.vue","webpack://vue3_final_challenge/./src/views/user/UserFavorite.vue?a43f"],"sourcesContent":["export default {\n  saveFavorite(favorite) {\n    const favoriteStr = JSON.stringify(favorite);\n    localStorage.setItem(\"favoriteProduct\", favoriteStr);\n  },\n  getFavorite() {\n    return JSON.parse(localStorage.getItem(\"favoriteProduct\"));\n  },\n};\n","<template>\n  <Loading :active=\"isLoading\"\n    ><section><span class=\"loader-18\"></span></section\n  ></Loading>\n  <div class=\"container products_all mainContainer\">\n    <div v-if=\"favorite.length !== 0\" class=\"py-5\">\n      <h3 class=\"text-center\">收藏清單</h3>\n      <div class=\"row justify-content-center\">\n        <div class=\"col col-lg-9 mt-lg-5\" style=\"margin-top: 45px\">\n          <div class=\"row row-cols-2 row-cols-lg-4 gx-2 gx-lg-4 p-1 p-lg-0\">\n            <div\n              class=\"col mb-4 mb-lg-5\"\n              v-for=\"item in favoriteProduct\"\n              :key=\"item.id\"\n            >\n              <div\n                class=\"position-relative text-center product d-flex flex-column h-100\"\n              >\n                <div class=\"mb-2\">\n                  <button\n                    type=\"button\"\n                    class=\"btn btn-outline-danger btn-sm\"\n                    @click=\"removeFavorite(item)\"\n                  >\n                    <i class=\"bi bi-x-lg\"></i>\n                  </button>\n                </div>\n                <a @click=\"getProductPage(item.id)\">\n                  <div\n                    v-if=\"item.origin_price !== item.price\"\n                    class=\"onSale_favorite position-absolute text-white bg-danger py-1 px-3\"\n                    style=\"z-index: 5\"\n                  >\n                    特 價\n                  </div>\n                  <div class=\"product_img\">\n                    <img\n                      :src=\"`${item.imageUrl}`\"\n                      :alt=\"item.title\"\n                      class=\"object-fit-cover\"\n                    />\n                  </div>\n                  <p class=\"my-1 fw-normal\">{{ item.title }}</p>\n                  <div class=\"price text-center\">\n                    <div v-if=\"item.origin_price !== item.price\">\n                      <p class=\"mb-1 text-danger\">NT$ {{ item.price }}</p>\n                    </div>\n                    <div v-if=\"item.origin_price === item.price\">\n                      <p class=\"mb-1\">NT$ {{ item.price }}</p>\n                    </div>\n                    <div v-if=\"item.origin_price !== item.price\">\n                      <p\n                        class=\"product_origin_price mb-1 text-decoration-line-through\"\n                        style=\"font-size: 13px\"\n                      >\n                        NT$ {{ item.origin_price }}\n                      </p>\n                    </div>\n                  </div>\n                </a>\n                <div class=\"mt-auto\">\n                  <button\n                    type=\"button\"\n                    class=\"btnHover btnHover5 col ms-1 ms-lg-0 me-lg-1\"\n                    @click=\"addToCart(item.id)\"\n                  >\n                    <div>\n                      <span>加到購物車</span>\n                      <span>加到購物車</span>\n                    </div>\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div v-else style=\"padding-top: 180px; padding-bottom: 250px\">\n      <div class=\"text-center my-5\">\n        <p class=\"fs-4 ls\">您的收藏清單目前是空的唷！</p>\n        <router-link\n          to=\"/productsall\"\n          type=\"button\"\n          class=\"btnHover btn-lg rounded-0 mt-3 d-block w-25 mx-auto\"\n        >\n          <div>\n            <span>去逛逛商店 <i class=\"bi bi-arrow-right\" /></span>\n            <span>去逛逛商店 <i class=\"bi bi-arrow-right\" /></span>\n          </div>\n        </router-link>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport saveFavorite from \"@/methods/saveFavorite\";\n\nexport default {\n  data() {\n    return {\n      favorite: saveFavorite.getFavorite() || [],\n      favoriteProduct: [],\n      isLoading: false,\n      carts: [],\n      product: {},\n      productsQty: 1,\n    };\n  },\n  inject: [\"emitter\"],\n  methods: {\n    getFavoriteProduct() {\n      this.isLoading = true;\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\n        )\n        .then((response) => {\n          this.isLoading = false;\n          this.favoriteProduct = response.data.products.filter((product) =>\n            this.favorite.includes(product.id)\n          );\n          this.emitter.emit(\"update-favorite\", this.favoriteProduct);\n        })\n        .catch((error) => {\n          this.isLoading = false;\n          this.$httpMessageState(error, \"連線錯誤\");\n        });\n    },\n    getCart() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http\n        .get(url)\n        .then((response) => {\n          this.carts = response.data.data.carts;\n          this.emitter.emit(\"update-cart\", this.carts);\n        })\n        .catch((error) => {\n          this.$httpMessageState(error, \"連線錯誤\");\n        });\n    },\n    removeFavorite(item) {\n      this.isLoading = true;\n      this.favorite.splice(this.favorite.indexOf(item.id), 1);\n      this.$httpMessageState(\n        {\n          data: {\n            success: true,\n          },\n        },\n        `已將 ${item.title} 移除喜愛清單`\n      );\n      saveFavorite.saveFavorite(this.favorite);\n      this.isLoading = false;\n      this.getFavoriteProduct();\n    },\n    addToCart(id, qty = this.productsQty) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      const cart = {\n        product_id: id,\n        qty,\n      };\n      this.isLoading = true;\n      this.$http\n        .post(url, { data: cart })\n        .then((response) => {\n          this.isLoading = false;\n          this.$httpMessageState(response, \"加入購物車\");\n          this.getCart();\n        })\n        .catch((error) => {\n          this.$httpMessageState(error, \"連線錯誤\");\n        });\n    },\n    getProductPage(id) {\n      this.$router.push(`/products/${id}`);\n    },\n  },\n  created() {\n    this.getFavoriteProduct();\n  },\n};\n</script>\n","import { render } from \"./UserFavorite.vue?vue&type=template&id=fcc9f418\"\nimport script from \"./UserFavorite.vue?vue&type=script&lang=js\"\nexport * from \"./UserFavorite.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["saveFavorite","favorite","favoriteStr","JSON","stringify","localStorage","setItem","getFavorite","parse","getItem","class","key","style","_createElementBlock","_Fragment","_createVNode","_component_Loading","active","$data","isLoading","default","_withCtx","_cache","_createElementVNode","_","_hoisted_1","length","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_renderList","favoriteProduct","item","id","_hoisted_6","_hoisted_7","type","onClick","$event","$options","removeFavorite","_hoisted_8","getProductPage","origin_price","price","_hoisted_10","_createCommentVNode","_hoisted_11","src","imageUrl","alt","title","_hoisted_12","_hoisted_13","_toDisplayString","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_9","_hoisted_21","addToCart","_hoisted_22","_hoisted_23","_hoisted_24","_component_router_link","to","_createTextVNode","data","carts","product","productsQty","inject","methods","getFavoriteProduct","this","$http","get","then","response","products","filter","includes","emitter","emit","catch","error","$httpMessageState","getCart","url","splice","indexOf","success","qty","cart","product_id","post","$router","push","created","__exports__","render"],"sourceRoot":""}