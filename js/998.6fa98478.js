"use strict";(self["webpackChunkvue3_final_challenge"]=self["webpackChunkvue3_final_challenge"]||[]).push([[998],{1151:function(t,i){i.A={saveFavorite(t){const i=JSON.stringify(t);localStorage.setItem("favoriteProduct",i)},getFavorite(){return JSON.parse(localStorage.getItem("favoriteProduct"))}}},8998:function(t,i,e){e.r(i),e.d(i,{default:function(){return N}});var s=e(6768),a=e(4232);const o={class:"container products_all mainContainer"},r={key:0,class:"py-5"},c={class:"row justify-content-center"},l={class:"col col-lg-9 mt-lg-5",style:{"margin-top":"45px"}},n={class:"row row-cols-2 row-cols-lg-4 gx-2 gx-lg-4 p-1 p-lg-0"},d={class:"position-relative text-center product d-flex flex-column h-100"},u={class:"mb-2"},p=["onClick"],g=["onClick"],h={key:0,class:"onSale_favorite position-absolute text-white bg-danger py-1 px-3",style:{"z-index":"5"}},v={class:"product_img"},k=["src","alt"],L={class:"my-1 fw-normal"},f={class:"price text-center"},m={key:0},b={class:"mb-1 text-danger"},y={key:1},x={class:"mb-1"},C={key:2},_={class:"product_origin_price mb-1 text-decoration-line-through",style:{"font-size":"13px"}},$={class:"mt-auto"},F=["onClick"],P={key:1,style:{"padding-top":"180px","padding-bottom":"250px"}},w={class:"text-center my-5"};function S(t,i,e,S,E,X){const Q=(0,s.g2)("Loading"),M=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(Q,{active:E.isLoading},{default:(0,s.k6)((()=>i[0]||(i[0]=[(0,s.Lk)("section",null,[(0,s.Lk)("span",{class:"loader-18"})],-1)]))),_:1},8,["active"]),(0,s.Lk)("div",o,[0!==E.favorite.length?((0,s.uX)(),(0,s.CE)("div",r,[i[3]||(i[3]=(0,s.Lk)("h3",{class:"text-center"},"收藏清單",-1)),(0,s.Lk)("div",c,[(0,s.Lk)("div",l,[(0,s.Lk)("div",n,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(E.favoriteProduct,(t=>((0,s.uX)(),(0,s.CE)("div",{class:"col mb-4 mb-lg-5",key:t.id},[(0,s.Lk)("div",d,[(0,s.Lk)("div",u,[(0,s.Lk)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:i=>X.removeFavorite(t)},i[1]||(i[1]=[(0,s.Lk)("i",{class:"bi bi-x-lg"},null,-1)]),8,p)]),(0,s.Lk)("a",{onClick:i=>X.getProductPage(t.id)},[t.origin_price!==t.price?((0,s.uX)(),(0,s.CE)("div",h," 特 價 ")):(0,s.Q3)("",!0),(0,s.Lk)("div",v,[(0,s.Lk)("img",{src:`${t.imageUrl}`,alt:t.title,class:"object-fit-cover"},null,8,k)]),(0,s.Lk)("p",L,(0,a.v_)(t.title),1),(0,s.Lk)("div",f,[t.origin_price!==t.price?((0,s.uX)(),(0,s.CE)("div",m,[(0,s.Lk)("p",b,"NT$ "+(0,a.v_)(t.price),1)])):(0,s.Q3)("",!0),t.origin_price===t.price?((0,s.uX)(),(0,s.CE)("div",y,[(0,s.Lk)("p",x,"NT$ "+(0,a.v_)(t.price),1)])):(0,s.Q3)("",!0),t.origin_price!==t.price?((0,s.uX)(),(0,s.CE)("div",C,[(0,s.Lk)("p",_," NT$ "+(0,a.v_)(t.origin_price),1)])):(0,s.Q3)("",!0)])],8,g),(0,s.Lk)("div",$,[(0,s.Lk)("button",{type:"button",class:"btnHover btnHover5 col ms-1 ms-lg-0 me-lg-1",onClick:i=>X.addToCart(t.id)},i[2]||(i[2]=[(0,s.Lk)("div",null,[(0,s.Lk)("span",null,"加到購物車"),(0,s.Lk)("span",null,"加到購物車")],-1)]),8,F)])])])))),128))])])])])):((0,s.uX)(),(0,s.CE)("div",P,[(0,s.Lk)("div",w,[i[5]||(i[5]=(0,s.Lk)("p",{class:"fs-4 ls"},"您的收藏清單目前是空的唷！",-1)),(0,s.bF)(M,{to:"/productsall",type:"button",class:"btnHover btn-lg rounded-0 mt-3 d-block w-25 mx-auto"},{default:(0,s.k6)((()=>i[4]||(i[4]=[(0,s.Lk)("div",null,[(0,s.Lk)("span",null,[(0,s.eW)("去逛逛商店 "),(0,s.Lk)("i",{class:"bi bi-arrow-right"})]),(0,s.Lk)("span",null,[(0,s.eW)("去逛逛商店 "),(0,s.Lk)("i",{class:"bi bi-arrow-right"})])],-1)]))),_:1})])]))])],64)}e(4114),e(8111),e(2489);var E=e(1151),X={data(){return{favorite:E.A.getFavorite()||[],favoriteProduct:[],isLoading:!1,carts:[],product:{},productsQty:1}},inject:["emitter"],methods:{getFavoriteProduct(){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/api/guantony-api/products/all").then((t=>{this.isLoading=!1,this.favoriteProduct=t.data.products.filter((t=>this.favorite.includes(t.id))),this.emitter.emit("update-favorite",this.favoriteProduct)})).catch((t=>{this.isLoading=!1,this.$httpMessageState(t,"連線錯誤")}))},getCart(){const t="https://vue3-course-api.hexschool.io/api/guantony-api/cart";this.$http.get(t).then((t=>{this.carts=t.data.data.carts,this.emitter.emit("update-cart",this.carts)})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))},removeFavorite(t){this.isLoading=!0,this.favorite.splice(this.favorite.indexOf(t.id),1),this.$httpMessageState({data:{success:!0}},`已將 ${t.title} 移除喜愛清單`),E.A.saveFavorite(this.favorite),this.isLoading=!1,this.getFavoriteProduct()},addToCart(t,i=this.productsQty){const e="https://vue3-course-api.hexschool.io/api/guantony-api/cart",s={product_id:t,qty:i};this.isLoading=!0,this.$http.post(e,{data:s}).then((t=>{this.isLoading=!1,this.$httpMessageState(t,"加入購物車"),this.getCart()})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))},getProductPage(t){this.$router.push(`/products/${t}`)}},created(){this.getFavoriteProduct()}},Q=e(1241);const M=(0,Q.A)(X,[["render",S]]);var N=M}}]);
//# sourceMappingURL=998.6fa98478.js.map